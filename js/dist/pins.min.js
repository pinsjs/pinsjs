var pins=function(e){"use strict";var t={},n=function(e){return Object.keys(t).includes(e)?t[e]:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return null}},r={get:n,set:function(e,n){t[e]=n}},a=function(e){return null==e},o=function(e,t){var r=n("getOption")(e);return a(r)?t:r},c=function(e,t){return null!==t&&(e=e.concat(t)),e},u=function(e){return Array.isArray(e)?e:[e]},s=function(e){if(Array.isArray(e)){if(1!=e.length)throw new Error("Array has more than one element but expecting only one");e=e[0]}return e},l=function(e){return Array.isArray(e)&&1==e.length?e[0]:e},f=function(e,t){n("uiViewerRegister")(e,t)},p=function(e){n("uiViewerUpdated")(e)},d={},h=function(){return Object.keys(d)},g=function(){return o("pins.path",r.get("userCacheDir")("pins"))},m=function(){return r.get("tempfile")()},v=function(e){return r.get("basename")(e)},y=function(e){return r.get("readLines")(e)},b=function(e,t){return r.get("writeLines")(e,t)},w=Object.freeze({create:function(e,t){void 0===t&&(t={recursive:!1});t.recursive;return r.get("dirCreate")(e)},exists:function(e){return r.get("dirExists")(e)},list:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return r.get("dirList")(s(e))},remove:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return(e=u(e)).map((function(t){return r.get("dirRemove")(e)}))},zip:function(e,t,n){for(var i=[],a=arguments.length-3;a-- >0;)i[a]=arguments[a+3];return r.get("dirZip")(e,e,n)}}),x=Object.freeze({filePathSansExt:function(e){return e.replace(/\.[^/.]+$/,"")},fileExt:function(e){return e.match(/\.[^/.]+$/,"")[0]}}),A=function(e,t){return r.get("fileWrite")(e,t)},k=function(e){return r.get("fileRead")(e)},O=function(e,t){return r.get("filePath")(e,t)},E=function(e,t){void 0===t&&(t={winslash:"\\",mustWork:!1});t.winslash,t.mustWork;return e},C=function(e){return e.replace(/[^\/]+$/,"")},j=function(e){return r.get("fileExists")(e)},S=function(e,t,n){void 0===n&&(n={recursive:!0});var i=n.recursive;return r.get("fileCopy")(e,t,i)},I=function(e){return r.get("fileSize")(e)},P=function(e,t){return r.get("md5")(e,t)},F=function(e,t){var n=[];return a(e)||(n=e),n.columns=t,n},T=function(e){if(Array.isArray(e)){if(0===e.length||void 0!==e.columns)return!0;if(1===e.length&&"object"==typeof e[0])return!0;if(e.length>1){for(var t=!0,n=1;n<e.length;n++)if("object"!=typeof e[n]||e[n].length!==e[0].length){t=!1;break}return t}}return!1},_=function(){return o("pins.board","local")},N=function(e){var t=e.cache,n=O(t,e.name);return w.exists(n)||w.create(n,{recursive:!0}),E(n,{mustWork:!1})},L=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=null,r=null;try{r=e[e.length-1]()}catch(e){n=e}for(var i=0;i<e.length-2;i++)e[i]();if(null!==n)throw n;return r},R=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];o("pins.verbose",!0)&&r.get("pinLog")(e.join(""))},D=function(e,t){o("pins.verbose",!0)&&r.get("pinLog")("Calling "+e+"("+JSON.stringify(t)+")")};function M(e){return null==e}var z={isNothing:M,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:M(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,a;if(t)for(n=0,r=(a=Object.keys(t)).length;n<r;n+=1)e[i=a[n]]=t[i];return e}};function U(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}U.prototype=Object.create(Error.prototype),U.prototype.constructor=U,U.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t};var G=U;function q(e,t,n,r,i){this.name=e,this.buffer=t,this.position=n,this.line=r,this.column=i}q.prototype.getSnippet=function(e,t){var n,r,i,a,o;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&-1==="\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(i="",a=this.position;a<this.buffer.length&&-1==="\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>t/2-1){i=" ... ",a-=5;break}return o=this.buffer.slice(r,a),z.repeat(" ",e)+n+o+i+"\n"+z.repeat(" ",e+this.position-r+n.length)+"^"},q.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(n+=":\n"+t),n};var $=q,H=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],B=["scalar","sequence","mapping"];var W=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===H.indexOf(t))throw new G('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===B.indexOf(this.kind))throw new G('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function Y(e,t,n){var r=[];return e.include.forEach((function(e){n=Y(e,t,n)})),e[t].forEach((function(e){n.forEach((function(t,n){t.tag===e.tag&&t.kind===e.kind&&r.push(n)})),n.push(e)})),n.filter((function(e,t){return-1===r.indexOf(t)}))}function V(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new G("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=Y(this,"implicit",[]),this.compiledExplicit=Y(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,n=arguments,r={scalar:{},sequence:{},mapping:{},fallback:{}};function i(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)n[e].forEach(i);return r}(this.compiledImplicit,this.compiledExplicit)}V.DEFAULT=null,V.create=function(){var e,t;switch(arguments.length){case 1:e=V.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new G("Wrong number of arguments for Schema.create function")}if(e=z.toArray(e),t=z.toArray(t),!e.every((function(e){return e instanceof V})))throw new G("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof W})))throw new G("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new V({include:e,explicit:t})};var K=V,Z=new K({explicit:[new W("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),new W("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),new W("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})]});var J=new W("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});var Q=new W("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function X(e){return 48<=e&&e<=55}function ee(e){return 48<=e&&e<=57}var te=new W("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,i=0,a=!1;if(!r)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===r)return!0;if("b"===(t=e[++i])){for(i++;i<r;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;a=!0}return a&&"_"!==t}for(;i<r;i++)if("_"!==(t=e[i])){if(!X(e.charCodeAt(i)))return!1;a=!0}return a&&"_"!==t}if("_"===t)return!1;for(;i<r;i++)if("_"!==(t=e[i])){if(":"===t)break;if(!ee(e.charCodeAt(i)))return!1;a=!0}return!(!a||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(i)))},construct:function(e){var t,n,r=e,i=1,a=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(t=r[0])&&"+"!==t||("-"===t&&(i=-1),t=(r=r.slice(1))[0]),"0"===r?0:"0"===t?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach((function(e){a.unshift(parseInt(e,10))})),r=0,n=1,a.forEach((function(e){r+=e*n,n*=60})),i*r):i*parseInt(r,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!z.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ne=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var re=/^[-+]?[0-9]+e/;var ie=new K({include:[Z],implicit:[J,Q,te,new W("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!ne.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n,r,i;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,i=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){i.unshift(parseFloat(e,10))})),t=0,r=1,i.forEach((function(e){t+=e*r,r*=60})),n*t):n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||z.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(z.isNegativeZero(e))return"-0.0";return n=e.toString(10),re.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})]}),ae=new K({include:[ie]}),oe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ce=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var ue=new W("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==oe.exec(e)||null!==ce.exec(e))},construct:function(e){var t,n,r,i,a,o,c,u,s=0,l=null;if(null===(t=oe.exec(e))&&(t=ce.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(a=+t[4],o=+t[5],c=+t[6],t[7]){for(s=t[7].slice(0,3);s.length<3;)s+="0";s=+s}return t[9]&&(l=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(l=-l)),u=new Date(Date.UTC(n,r,i,a,o,c,s)),l&&u.setTime(u.getTime()-l),u},instanceOf:Date,represent:function(e){return e.toISOString()}});var se,le=new W("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}});function fe(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}try{se=fe("buffer").Buffer}catch(e){}var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var de=new W("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,a=pe;for(n=0;n<i;n++)if(!((t=a.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,a=pe,o=0,c=[];for(t=0;t<i;t++)t%4==0&&t&&(c.push(o>>16&255),c.push(o>>8&255),c.push(255&o)),o=o<<6|a.indexOf(r.charAt(t));return 0===(n=i%4*6)?(c.push(o>>16&255),c.push(o>>8&255),c.push(255&o)):18===n?(c.push(o>>10&255),c.push(o>>2&255)):12===n&&c.push(o>>4&255),se?se.from?se.from(c):new se(c):c},predicate:function(e){return se&&se.isBuffer(e)},represent:function(e){var t,n,r="",i=0,a=e.length,o=pe;for(t=0;t<a;t++)t%3==0&&t&&(r+=o[i>>18&63],r+=o[i>>12&63],r+=o[i>>6&63],r+=o[63&i]),i=(i<<8)+e[t];return 0===(n=a%3)?(r+=o[i>>18&63],r+=o[i>>12&63],r+=o[i>>6&63],r+=o[63&i]):2===n?(r+=o[i>>10&63],r+=o[i>>4&63],r+=o[i<<2&63],r+=o[64]):1===n&&(r+=o[i>>2&63],r+=o[i<<4&63],r+=o[64],r+=o[64]),r}}),he=Object.prototype.hasOwnProperty,ge=Object.prototype.toString;var me=new W("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,a,o=[],c=e;for(t=0,n=c.length;t<n;t+=1){if(r=c[t],a=!1,"[object Object]"!==ge.call(r))return!1;for(i in r)if(he.call(r,i)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==o.indexOf(i))return!1;o.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),ve=Object.prototype.toString;var ye=new W("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,a,o=e;for(a=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(r=o[t],"[object Object]"!==ve.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;a[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,a,o=e;for(a=new Array(o.length),t=0,n=o.length;t<n;t+=1)r=o[t],i=Object.keys(r),a[t]=[i[0],r[i[0]]];return a}}),be=Object.prototype.hasOwnProperty;var we=new K({include:[ae],implicit:[ue,le],explicit:[de,me,ye,new W("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(be.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})]});var xe=new W("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}});var Ae,ke=new W("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),r="";if("/"===t[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==t[t.length-r.length-1])return!1}return!0},construct:function(e){var t=e,n=/\/([gim]*)$/.exec(e),r="";return"/"===t[0]&&(n&&(r=n[1]),t=t.slice(1,t.length-r.length-1)),new RegExp(t,r)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}});try{Ae=fe("esprima")}catch(e){"undefined"!=typeof window&&(Ae=window.esprima)}var Oe=new W("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",n=Ae.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,n="("+e+")",r=Ae.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"ArrowFunctionExpression"!==r.body[0].expression.type&&"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach((function(e){i.push(e.name)})),t=r.body[0].expression.body.range,"BlockStatement"===r.body[0].expression.body.type?new Function(i,n.slice(t[0]+1,t[1]-1)):new Function(i,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}}),Ee=K.DEFAULT=new K({include:[we],explicit:[xe,ke,Oe]}),Ce=Object.prototype.hasOwnProperty,je=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Se=/[\x85\u2028\u2029]/,Ie=/[,\[\]\{\}]/,Pe=/^(?:!|!!|![a-z\-]+!)$/i,Fe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Te(e){return Object.prototype.toString.call(e)}function _e(e){return 10===e||13===e}function Ne(e){return 9===e||32===e}function Le(e){return 9===e||32===e||10===e||13===e}function Re(e){return 44===e||91===e||93===e||123===e||125===e}function De(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Me(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"Â…":95===e?"Â ":76===e?"\u2028":80===e?"\u2029":""}function ze(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var Ue=new Array(256),Ge=new Array(256),qe=0;qe<256;qe++)Ue[qe]=Me(qe)?1:0,Ge[qe]=Me(qe);function $e(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ee,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function He(e,t){return new G(t,new $(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function Be(e,t){throw He(e,t)}function We(e,t){e.onWarning&&e.onWarning.call(null,He(e,t))}var Ye={YAML:function(e,t,n){var r,i,a;null!==e.version&&Be(e,"duplication of %YAML directive"),1!==n.length&&Be(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Be(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),a=parseInt(r[2],10),1!==i&&Be(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&We(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&Be(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],Pe.test(r)||Be(e,"ill-formed tag handle (first argument) of the TAG directive"),Ce.call(e.tagMap,r)&&Be(e,'there is a previously declared suffix for "'+r+'" tag handle'),Fe.test(i)||Be(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[r]=i}};function Ve(e,t,n,r){var i,a,o,c;if(t<n){if(c=e.input.slice(t,n),r)for(i=0,a=c.length;i<a;i+=1)9===(o=c.charCodeAt(i))||32<=o&&o<=1114111||Be(e,"expected valid JSON character");else je.test(c)&&Be(e,"the stream contains non-printable characters");e.result+=c}}function Ke(e,t,n,r){var i,a,o,c;for(z.isObject(n)||Be(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,c=(i=Object.keys(n)).length;o<c;o+=1)a=i[o],Ce.call(t,a)||(t[a]=n[a],r[a]=!0)}function Ze(e,t,n,r,i,a,o,c){var u,s;if(Array.isArray(i))for(u=0,s=(i=Array.prototype.slice.call(i)).length;u<s;u+=1)Array.isArray(i[u])&&Be(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===Te(i[u])&&(i[u]="[object Object]");if("object"==typeof i&&"[object Object]"===Te(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(a))for(u=0,s=a.length;u<s;u+=1)Ke(e,t,a[u],n);else Ke(e,t,a,n);else e.json||Ce.call(n,i)||!Ce.call(t,i)||(e.line=o||e.line,e.position=c||e.position,Be(e,"duplicated mapping key")),t[i]=a,delete n[i];return t}function Je(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):Be(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function Qe(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;Ne(i);)i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!_e(i))break;for(Je(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&We(e,"deficient indentation"),r}function Xe(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Le(t)))}function et(e,t){1===t?e.result+=" ":t>1&&(e.result+=z.repeat("\n",t-1))}function tt(e,t){var n,r,i=e.tag,a=e.anchor,o=[],c=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),r=e.input.charCodeAt(e.position);0!==r&&45===r&&Le(e.input.charCodeAt(e.position+1));)if(c=!0,e.position++,Qe(e,!0,-1)&&e.lineIndent<=t)o.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,it(e,t,3,!1,!0),o.push(e.result),Qe(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)Be(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!c&&(e.tag=i,e.anchor=a,e.kind="sequence",e.result=o,!0)}function nt(e){var t,n,r,i,a=!1,o=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&Be(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(a=!0,i=e.input.charCodeAt(++e.position)):33===i?(o=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):Be(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!Le(i);)33===i&&(o?Be(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),Pe.test(n)||Be(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),Ie.test(r)&&Be(e,"tag suffix cannot contain flow indicator characters")}return r&&!Fe.test(r)&&Be(e,"tag name cannot contain such characters: "+r),a?e.tag=r:Ce.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:Be(e,'undeclared tag handle "'+n+'"'),!0}function rt(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&Be(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Le(n)&&!Re(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function it(e,t,n,r,i){var a,o,c,u,s,l,f,p,d=1,h=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=o=c=4===n||3===n,r&&Qe(e,!0,-1)&&(h=!0,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)),1===d)for(;nt(e)||rt(e);)Qe(e,!0,-1)?(h=!0,c=a,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)):c=!1;if(c&&(c=h||i),1!==d&&4!==n||(f=1===n||2===n?t:t+1,p=e.position-e.lineStart,1===d?c&&(tt(e,p)||function(e,t,n){var r,i,a,o,c,u=e.tag,s=e.anchor,l={},f={},p=null,d=null,h=null,g=!1,m=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=l),c=e.input.charCodeAt(e.position);0!==c;){if(r=e.input.charCodeAt(e.position+1),a=e.line,o=e.position,63!==c&&58!==c||!Le(r)){if(!it(e,n,2,!1,!0))break;if(e.line===a){for(c=e.input.charCodeAt(e.position);Ne(c);)c=e.input.charCodeAt(++e.position);if(58===c)Le(c=e.input.charCodeAt(++e.position))||Be(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Ze(e,l,f,p,d,null),p=d=h=null),m=!0,g=!1,i=!1,p=e.tag,d=e.result;else{if(!m)return e.tag=u,e.anchor=s,!0;Be(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!m)return e.tag=u,e.anchor=s,!0;Be(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(g&&(Ze(e,l,f,p,d,null),p=d=h=null),m=!0,g=!0,i=!0):g?(g=!1,i=!0):Be(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===a||e.lineIndent>t)&&(it(e,t,4,!0,i)&&(g?d=e.result:h=e.result),g||(Ze(e,l,f,p,d,h,a,o),p=d=h=null),Qe(e,!0,-1),c=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==c)Be(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&Ze(e,l,f,p,d,null),m&&(e.tag=u,e.anchor=s,e.kind="mapping",e.result=l),m}(e,p,f))||function(e,t){var n,r,i,a,o,c,u,s,l,f,p=!0,d=e.tag,h=e.anchor,g={};if(91===(f=e.input.charCodeAt(e.position)))i=93,c=!1,r=[];else{if(123!==f)return!1;i=125,c=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),f=e.input.charCodeAt(++e.position);0!==f;){if(Qe(e,!0,t),(f=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=d,e.anchor=h,e.kind=c?"mapping":"sequence",e.result=r,!0;p||Be(e,"missed comma between flow collection entries"),l=null,a=o=!1,63===f&&Le(e.input.charCodeAt(e.position+1))&&(a=o=!0,e.position++,Qe(e,!0,t)),n=e.line,it(e,t,1,!1,!0),s=e.tag,u=e.result,Qe(e,!0,t),f=e.input.charCodeAt(e.position),!o&&e.line!==n||58!==f||(a=!0,f=e.input.charCodeAt(++e.position),Qe(e,!0,t),it(e,t,1,!1,!0),l=e.result),c?Ze(e,r,g,s,u,l):a?r.push(Ze(e,null,g,s,u,l)):r.push(u),Qe(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(p=!0,f=e.input.charCodeAt(++e.position)):p=!1}Be(e,"unexpected end of the stream within a flow collection")}(e,f)?g=!0:(o&&function(e,t){var n,r,i,a,o,c=1,u=!1,s=!1,l=t,f=0,p=!1;if(124===(a=e.input.charCodeAt(e.position)))r=!1;else{if(62!==a)return!1;r=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)1===c?c=43===a?3:2:Be(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(o=a)&&o<=57?o-48:-1)>=0))break;0===i?Be(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Be(e,"repeat of an indentation width identifier"):(l=t+i-1,s=!0)}if(Ne(a)){do{a=e.input.charCodeAt(++e.position)}while(Ne(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!_e(a)&&0!==a)}for(;0!==a;){for(Je(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!s||e.lineIndent<l)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>l&&(l=e.lineIndent),_e(a))f++;else{if(e.lineIndent<l){3===c?e.result+=z.repeat("\n",u?1+f:f):1===c&&u&&(e.result+="\n");break}for(r?Ne(a)?(p=!0,e.result+=z.repeat("\n",u?1+f:f)):p?(p=!1,e.result+=z.repeat("\n",f+1)):0===f?u&&(e.result+=" "):e.result+=z.repeat("\n",f):e.result+=z.repeat("\n",u?1+f:f),u=!0,s=!0,f=0,n=e.position;!_e(a)&&0!==a;)a=e.input.charCodeAt(++e.position);Ve(e,n,e.position,!1)}}return!0}(e,f)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(Ve(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else _e(n)?(Ve(e,r,i,!0),et(e,Qe(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Xe(e)?Be(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Be(e,"unexpected end of the stream within a single quoted scalar")}(e,f)||function(e,t){var n,r,i,a,o,c,u;if(34!==(c=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(c=e.input.charCodeAt(e.position));){if(34===c)return Ve(e,n,e.position,!0),e.position++,!0;if(92===c){if(Ve(e,n,e.position,!0),_e(c=e.input.charCodeAt(++e.position)))Qe(e,!1,t);else if(c<256&&Ue[c])e.result+=Ge[c],e.position++;else if((o=120===(u=c)?2:117===u?4:85===u?8:0)>0){for(i=o,a=0;i>0;i--)(o=De(c=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+o:Be(e,"expected hexadecimal character");e.result+=ze(a),e.position++}else Be(e,"unknown escape sequence");n=r=e.position}else _e(c)?(Ve(e,n,r,!0),et(e,Qe(e,!1,t)),n=r=e.position):e.position===e.lineStart&&Xe(e)?Be(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Be(e,"unexpected end of the stream within a double quoted scalar")}(e,f)?g=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Le(r)&&!Re(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||Be(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Qe(e,!0,-1),!0}(e)?function(e,t,n){var r,i,a,o,c,u,s,l,f=e.kind,p=e.result;if(Le(l=e.input.charCodeAt(e.position))||Re(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(Le(r=e.input.charCodeAt(e.position+1))||n&&Re(r)))return!1;for(e.kind="scalar",e.result="",i=a=e.position,o=!1;0!==l;){if(58===l){if(Le(r=e.input.charCodeAt(e.position+1))||n&&Re(r))break}else if(35===l){if(Le(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&Xe(e)||n&&Re(l))break;if(_e(l)){if(c=e.line,u=e.lineStart,s=e.lineIndent,Qe(e,!1,-1),e.lineIndent>=t){o=!0,l=e.input.charCodeAt(e.position);continue}e.position=a,e.line=c,e.lineStart=u,e.lineIndent=s;break}}o&&(Ve(e,i,a,!1),et(e,e.line-c),i=a=e.position,o=!1),Ne(l)||(a=e.position+1),l=e.input.charCodeAt(++e.position)}return Ve(e,i,a,!1),!!e.result||(e.kind=f,e.result=p,!1)}(e,f,1===n)&&(g=!0,null===e.tag&&(e.tag="?")):(g=!0,null===e.tag&&null===e.anchor||Be(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===d&&(g=c&&tt(e,p))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(u=0,s=e.implicitTypes.length;u<s;u+=1)if((l=e.implicitTypes[u]).resolve(e.result)){e.result=l.construct(e.result),e.tag=l.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else Ce.call(e.typeMap[e.kind||"fallback"],e.tag)?(l=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&l.kind!==e.kind&&Be(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+l.kind+'", not "'+e.kind+'"'),l.resolve(e.result)?(e.result=l.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):Be(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):Be(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function at(e){var t,n,r,i,a=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(i=e.input.charCodeAt(e.position))&&(Qe(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(o=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!Le(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&Be(e,"directive name must not be less than one character in length");0!==i;){for(;Ne(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!_e(i));break}if(_e(i))break;for(t=e.position;0!==i&&!Le(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&Je(e),Ce.call(Ye,n)?Ye[n](e,n,r):We(e,'unknown document directive "'+n+'"')}Qe(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,Qe(e,!0,-1)):o&&Be(e,"directives end mark is expected"),it(e,e.lineIndent-1,4,!1,!0),Qe(e,!0,-1),e.checkLineBreaks&&Se.test(e.input.slice(a,e.position))&&We(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Xe(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,Qe(e,!0,-1)):e.position<e.length-1&&Be(e,"end of the stream or a document separator is expected")}function ot(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new $e(e,t);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)at(n);return n.documents}function ct(e,t,n){var r,i,a=ot(e,n);if("function"!=typeof t)return a;for(r=0,i=a.length;r<i;r+=1)t(a[r])}function ut(e,t){var n=ot(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new G("expected a single document in the stream, but found more")}}var st={loadAll:ct,load:ut,safeLoadAll:function(e,t,n){if("function"!=typeof t)return ct(e,z.extend({schema:we},n));ct(e,t,z.extend({schema:we},n))},safeLoad:function(e,t){return ut(e,z.extend({schema:we},t))}},lt=Object.prototype.toString,ft=Object.prototype.hasOwnProperty,pt={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},dt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function ht(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new G("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+z.repeat("0",r-t.length)+t}function gt(e){this.schema=e.schema||Ee,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=z.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,a,o,c,u;if(null===t)return{};for(n={},i=0,a=(r=Object.keys(t)).length;i<a;i+=1)o=r[i],c=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(u=e.compiledTypeMap.fallback[o])&&ft.call(u.styleAliases,c)&&(c=u.styleAliases[c]),n[o]=c;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function mt(e,t){for(var n,r=z.repeat(" ",t),i=0,a=-1,o="",c=e.length;i<c;)-1===(a=e.indexOf("\n",i))?(n=e.slice(i),i=c):(n=e.slice(i,a+1),i=a+1),n.length&&"\n"!==n&&(o+=r),o+=n;return o}function vt(e,t){return"\n"+z.repeat(" ",e.indent*t)}function yt(e){return 32===e||9===e}function bt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function wt(e){return bt(e)&&65279!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&58!==e&&35!==e}function xt(e){return/^\n* /.test(e)}function At(e,t,n,r,i){var a,o,c,u=!1,s=!1,l=-1!==r,f=-1,p=bt(c=e.charCodeAt(0))&&65279!==c&&!yt(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&!yt(e.charCodeAt(e.length-1));if(t)for(a=0;a<e.length;a++){if(!bt(o=e.charCodeAt(a)))return 5;p=p&&wt(o)}else{for(a=0;a<e.length;a++){if(10===(o=e.charCodeAt(a)))u=!0,l&&(s=s||a-f-1>r&&" "!==e[f+1],f=a);else if(!bt(o))return 5;p=p&&wt(o)}s=s||l&&a-f-1>r&&" "!==e[f+1]}return u||s?n>9&&xt(e)?5:s?4:3:p&&!i(e)?1:2}function kt(e,t,n,r){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==dt.indexOf(t))return"'"+t+"'";var i=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),o=r||e.flowLevel>-1&&n>=e.flowLevel;switch(At(t,o,e.indent,a,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}))){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+Ot(t,e.indent)+Et(mt(t,i));case 4:return">"+Ot(t,e.indent)+Et(mt(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,a=(c=e.indexOf("\n"),c=-1!==c?c:e.length,i.lastIndex=c,Ct(e.slice(0,c),t)),o="\n"===e[0]||" "===e[0];var c;for(;r=i.exec(e);){var u=r[1],s=r[2];n=" "===s[0],a+=u+(o||n||""===s?"":"\n")+Ct(s,t),o=n}return a}(t,a),i));case 5:return'"'+function(e){for(var t,n,r,i="",a=0;a<e.length;a++)(t=e.charCodeAt(a))>=55296&&t<=56319&&(n=e.charCodeAt(a+1))>=56320&&n<=57343?(i+=ht(1024*(t-55296)+n-56320+65536),a++):i+=!(r=pt[t])&&bt(t)?e[a]:r||ht(t);return i}(t)+'"';default:throw new G("impossible error: invalid scalar style")}}()}function Ot(e,t){var n=xt(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function Et(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Ct(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,a=0,o=0,c=0,u="";n=i.exec(e);)(c=n.index)-a>t&&(r=o>a?o:c,u+="\n"+e.slice(a,r),a=r+1),o=c;return u+="\n",e.length-a>t&&o>a?u+=e.slice(a,o)+"\n"+e.slice(o+1):u+=e.slice(a),u.slice(1)}function jt(e,t,n){var r,i,a,o,c,u;for(a=0,o=(i=n?e.explicitTypes:e.implicitTypes).length;a<o;a+=1)if(((c=i[a]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof t&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(e.tag=n?c.tag:"?",c.represent){if(u=e.styleMap[c.tag]||c.defaultStyle,"[object Function]"===lt.call(c.represent))r=c.represent(t,u);else{if(!ft.call(c.represent,u))throw new G("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');r=c.represent[u](t,u)}e.dump=r}return!0}return!1}function St(e,t,n,r,i,a){e.tag=null,e.dump=n,jt(e,n,!1)||jt(e,n,!0);var o=lt.call(e.dump);r&&(r=e.flowLevel<0||e.flowLevel>t);var c,u,s="[object Object]"===o||"[object Array]"===o;if(s&&(u=-1!==(c=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(i=!1),u&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(s&&u&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),"[object Object]"===o)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,a,o,c,u,s,l="",f=e.tag,p=Object.keys(n);if(!0===e.sortKeys)p.sort();else if("function"==typeof e.sortKeys)p.sort(e.sortKeys);else if(e.sortKeys)throw new G("sortKeys must be a boolean or a function");for(i=0,a=p.length;i<a;i+=1)s="",r&&0===i||(s+=vt(e,t)),c=n[o=p[i]],St(e,t+1,o,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?s+="?":s+="? "),s+=e.dump,u&&(s+=vt(e,t)),St(e,t+1,c,!0,u)&&(e.dump&&10===e.dump.charCodeAt(0)?s+=":":s+=": ",l+=s+=e.dump));e.tag=f,e.dump=l||"{}"}(e,t,e.dump,i),u&&(e.dump="&ref_"+c+e.dump)):(!function(e,t,n){var r,i,a,o,c,u="",s=e.tag,l=Object.keys(n);for(r=0,i=l.length;r<i;r+=1)c=e.condenseFlow?'"':"",0!==r&&(c+=", "),o=n[a=l[r]],St(e,t,a,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),St(e,t,o,!1,!1)&&(u+=c+=e.dump));e.tag=s,e.dump="{"+u+"}"}(e,t,e.dump),u&&(e.dump="&ref_"+c+" "+e.dump));else if("[object Array]"===o){var l=e.noArrayIndent&&t>0?t-1:t;r&&0!==e.dump.length?(!function(e,t,n,r){var i,a,o="",c=e.tag;for(i=0,a=n.length;i<a;i+=1)St(e,t+1,n[i],!0,!0)&&(r&&0===i||(o+=vt(e,t)),e.dump&&10===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=c,e.dump=o||"[]"}(e,l,e.dump,i),u&&(e.dump="&ref_"+c+e.dump)):(!function(e,t,n){var r,i,a="",o=e.tag;for(r=0,i=n.length;r<i;r+=1)St(e,t,n[r],!1,!1)&&(0!==r&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=o,e.dump="["+a+"]"}(e,l,e.dump),u&&(e.dump="&ref_"+c+" "+e.dump))}else{if("[object String]"!==o){if(e.skipInvalid)return!1;throw new G("unacceptable kind of an object to dump "+o)}"?"!==e.tag&&kt(e,e.dump,t,a)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function It(e,t){var n,r,i=[],a=[];for(Pt(e,i,a),n=0,r=a.length;n<r;n+=1)t.duplicates.push(i[a[n]]);t.usedDuplicates=new Array(r)}function Pt(e,t,n){var r,i,a;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,a=e.length;i<a;i+=1)Pt(e[i],t,n);else for(i=0,a=(r=Object.keys(e)).length;i<a;i+=1)Pt(e[r[i]],t,n)}function Ft(e,t){var n=new gt(t=t||{});return n.noRefs||It(e,n),St(n,0,e,!0,!0)?n.dump+"\n":""}var Tt={dump:Ft,safeDump:function(e,t){return Ft(e,z.extend({schema:we},t))}};function _t(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var Nt={Type:W,Schema:K,FAILSAFE_SCHEMA:Z,JSON_SCHEMA:ie,CORE_SCHEMA:ae,DEFAULT_SAFE_SCHEMA:we,DEFAULT_FULL_SCHEMA:Ee,load:st.load,loadAll:st.loadAll,safeLoad:st.safeLoad,safeLoadAll:st.safeLoadAll,dump:Tt.dump,safeDump:Tt.safeDump,YAMLException:G,MINIMAL_SCHEMA:Z,SAFE_SCHEMA:we,DEFAULT_SCHEMA:Ee,scan:_t("scan"),parse:_t("parse"),compose:_t("compose"),addConstructor:_t("addConstructor")},Lt=function(e){var t=function(e,t,n){return a(e[t])?n:e[t]},n=e.map((function(e){var n={name:t(e,"name",v(e.path)),description:t(e,"description",""),type:t(e,"type","files")};return n.metadata=function(e,t){var n={};return Object.assign(n,e),t.forEach((function(e){n.hasOwnProperty(e)&&delete n[e]})),n}(e,["name","description","type"]),n}));return F(n,{name:"character",description:"character",type:"character"})},Rt=function(e,t){return function(e,t){try{return e()}catch(e){return t(e)}}(e,(function(){return null}))},Dt=function(e){return O(N(e),"data.txt")},Mt=function(e){var t=Ht(e);return L((function(){return Bt(t)}),(function(){var t=Dt(e);if(j(t)){var n=y(t).join("\n");return Nt.safeLoad(n)}return[]}))},zt=function(e,t){var n=Ht(t);return L((function(){return Bt(n)}),(function(){var n=Nt.safeDump(e);b(Dt(t),n.split("\n"))}))},Ut=function(e,t){var n=O(N(e),t);return w.exists(n)||w.create(n,{recursive:!0}),n},Gt=function(e,t,n){void 0===n&&(n={});var r=Ht(t);return L((function(){return Bt(r)}),(function(){var r=Mt(t);e=$t(e,r);var i=Ut(t,e);null===r&&(r=[]);var a=r.map((function(e){return e.name})),o=0;for(var c in a.includes(e)?o=a.findIndex((function(t){return t===e})):r[o=r.length]={},r[o].name=e,n)Array.isArray(n[c])&&!n[c].length||void 0===n[c]?delete r[o][c]:r[o][c]=n[c];return zt(r,t),i}))},qt=function(e,t){var n=Ht(t);return L((function(){return Bt(n)}),(function(){var n=Mt(t);e=$t(e,n);var r=n.map((function(e){return e.name}));if(!r.includes(e))throw R("Pin not found, pins available in registry: "+r.join(", ")),new Error("Pin '"+e+"' not found in '"+t.name+"' board.");return n.find((function(t){return t.name===e}))}))},$t=function(e,t){var n=t.map((function(e){return e.name})),r="";r=/\//g.test(e)?paste0("^",e,"$"):".*/"+e+"$";var i=n.filter((function(e){return new RegExp(r,"gi").test(e)}));return 1==i.length&&(e=i),e},Ht=function(e){return function(e,t){return r.get("fileExists")(e)}(Dt(e)+".lock",o("pins.lock.timeout",1/0))},Bt=function(e){return function(e){return r.get("fileExists")(e)}(e)},Wt=function(e,t){return e=E(e,{winslash:"/",mustWork:!1}),t=E(t,{winslash:"/",mustWork:!1}),e.startsWith(t)&&(e=e.substr(t.length+1,e.length)),e.replace("^/","")},Yt=function(e,t){var n=N(t);return e.startsWith(n)?e:E(O(n,e),{mustWork:!1})},Vt=function(e,t){var n=t.replace(/^https?:\/\//g,""),r=Rt((function(){return qt(n,e)||null}));a(r)||(r.cache={},Gt(n,e,{params:r}))},Kt=function(e){var t={},n=O(e,"data.txt");if(j(n)){var r=y(n).join("\n");t=Nt.safeLoad(r)}return a(t.type)&&(t.type="files"),t},Zt=function(e,t,n){var r=Object.assign({path:n},t);!function(e){for(var t in e)a(e[t])&&delete e[t]}(r);var i=Nt.safeDump(r);return b(O(e,"data.txt"),i.split("\n")),r},Jt=function(e,t){return a(t.path)||a(e.path)||/https?:\/\//g.test(e.path)||(e.path=O(e.path,t.path)),e=Object.assign(e,t)},Qt=function(){return o("pins.versions.path","_versions")},Xt=function(e){var t=w.list(e,{fullNames:!0});t=t.filter((function(e){return!/(\/|\\)_versions$/g.test(e)}));var n=O(Qt(),function(e){var t=e.map((function(e){return P(e)}));return t.length>1?(t=t.join(","),t=P(t)):t[0]}(t));return E(O(E(e),n),{mustWork:!1})},en=function(e,t,n){var r=null;if(function(e,t){return void 0===t&&(t={defaultValue:!1}),t.defaultValue?!1!==e.versions:!0===e.versions}(e)){var i=Ut(e,t),a=(r=Kt(i).versions||[],Xt(n)),o=Wt(a,n);r.some((function(e){return e===o}))&&(r=r.filter((function(e){return e!==o}))),w.exists(a)&&w.remove(a,{recursive:!0}),w.create(a,{recursive:!0});var c=w.list(n,{fullNames:!0}).filter((function(e){return e!=O(n,Qt())}));S(c,a,{recursive:!0}),r=[o].concat(r);var u=Kt(n);u.versions=r,function(e,t){var n=O(e,"data.txt"),r=Nt.safeDump(t);b(n,r.split("\n"))}(n,u)}return r},tn=function(e,t){var n=F(null,{versions:"character"}),r=Ut(e,t);return(n=Kt(r).versions).length>0&&(n={version:n}),n},nn=function(e){e.map((function(e){return e.replace("[^/\\\\]+$","")})).filter((function(e,t,n){return n.indexOf(e)===t})).length>0&&(e=e.map((function(e){return e.replace(/.*(\/|\\)/g,"")})));var t=e.map((function(e){return e.substr(0,7)}));return t.filter((function(e,t,n){return n.indexOf(e)===t})).length==e.length&&(e=t),e},rn=function(e,t){var n=nn(e).indexOf(t);if(-1===n)throw new Error("Version '"+t+"' is not valid, please select from pin_versions().");return e[n]};function an(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var on={},cn="default",un=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];D("useMethod",Object.assign.apply(Object,[{object:t}].concat(n))),on[e]=on[e]||{};var i=(t&&t.class?t.class:t.constructor&&t.constructor.name?t.constructor.name:cn).toLowerCase();return T(t)&&(i="dataframe"),void 0!==t._content&&(t=t._content),{className:i,object:t}},sn=function(e,t,n){return on[e]=on[e]||{},on[e][t]=n,n},ln=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new Promise((function(r,i){var a,o,c,u,s;return u=(c=un.apply(void 0,[e,t].concat(n))).className,t=c.object,on[e]&&on[e][u]?(s=(a=on[e])[u].apply(a,[t].concat(n)))&&s.then?s.then(r,i):r(s):on[e]&&on[e].default?r((o=on[e]).default.apply(o,[t].concat(n))):i(new Error("no applicable method for '"+e+"' applied to an object of class '"+u+"'"))}))},fn=function(e,t){for(var n,r,i=[],a=arguments.length-2;a-- >0;)i[a]=arguments[a+2];var o=un.apply(void 0,[e,t].concat(i)),c=o.className;if(t=o.object,on[e]&&on[e][c])return(n=on[e])[c].apply(n,[t].concat(i));if(on[e]&&on[e].default)return(r=on[e]).default.apply(r,[t].concat(i));throw new Error("no applicable method for '"+e+"' applied to an object of class '"+c+"'")};var pn=function(e,t,n,r){for(var i=[],a=arguments.length-4;a-- >0;)i[a]=arguments[a+4];return fn.apply(void 0,["boardPinCreate",e,t,n,r].concat(i))},dn=function(e,t){var n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(t,[]);return new Promise((function(t,r){return ln.apply(void 0,["boardInitialize",e].concat(n)).then(t,r)}))},hn=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new Promise((function(r,i){return r(ln.apply(void 0,["boardPinGet",e,t].concat(n)))}))};var gn=function(e,t){var n=t.name,r=t.board,i=t.registerCall,a=t.connect,o={name:n,board:null==r?n:r,connect:null==a?"packages"!==n:a,url:t.url,registerCall:i};return/^http:\/\/|^https:\/\//g.test(e)&&(o.url=e,o.board="datatxt",null!=n&&e!==n||(o.name=o.url.replace(/https?:\/\//g,"").replace(/\..*$/g,"")),o.registerCall='pins::board_register(board = "datatxt", name = "'+o.name+'", url = "'+o.url+'")'),null==o.name&&(o.name=e),null==o.board&&(o.board=e),o},mn=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];e=bn(e);return f(e,t),e},vn=function(e,t){var r=bn(e);return function(e){n("uiViewerClose")(e)}(r),r},yn=function(){D("boardList",{});var e=c(["local"],_()),t=c(h(),e);return t.filter((function(e,t,n){return n.indexOf(e)===t}))},bn=function(e){a(e)&&(e=_());var t='pins::board_register(board = "'+e+'")';if(!h().includes(e)){var n=gn(e,{});null!==n.registerCall&&(t=n.registerCall),e=n.name;try{wn(n.board,{name:n.name,connect:n.connect,registerCall:t,url:n.url})}catch(t){R("Failed to register board "+e+": "+t.toString())}if(!h().includes(e))throw"Board '"+e+"' not a board, available boards: "+yn().join(", ")}return function(e){return d[e]}(e)},wn=function(e,t){var n=t.name,i=t.cache,a=t.versions,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(t,["name","cache","versions"]);return new Promise((function(t,c){var u;return null==n&&(n=e),null==i&&(i=g()),u=gn(e,{board:e,name:n,registerCall:o.registerCall,connect:o.connect,url:o.url}),o.url=u.url,function(e,t,n,r){for(var i=[],a=arguments.length-4;a-- >0;)i[a]=arguments[a+4];return new Promise((function(a,o){return null==n?o(new Error("Please specify the 'cache' parameter.")):dn(e={board:e,name:t,cache:n,versions:r,class:e},Object.assign.apply(Object,[{cache:n,versions:r}].concat(i))).then((function(t){try{return a(e=t)}catch(e){return o(e)}}),o)}))}(u.board,u.name,i,a,o).then((function(n){try{return e=n,function(e,t){d[e]=t}(u.name,e),null==u.registerCall&&(u.registerCall=function(e,t){return r.get("boardRegisterCode")(e,t)}(e.name,u.name)),!1!==u.connect&&mn(e.name,u.registerCall),t(u.name)}catch(e){return c(e)}}),c)}))};function xn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var An=function(e,t){var n=t.board,r=t.cache,i=t.extract,o=t.version,c=t.files,s=t.signature,f=xn(t,["board","cache","extract","version","files","signature"]);return new Promise((function(t,p){var d,h,g,m;return a(n)?(d=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new Promise((function(t,n){var r=function(e){try{return t(null)}catch(e){return n(e)}};try{return hn.apply(void 0,e).then(t,r)}catch(e){r()}}))})(bn(null),e,{version:o}).then(function(t){try{if(a(h=t)&&a(n)){var c,u,s,l=[];for(c in yn())l.push(c);function f(){return l.length?(u=l.shift(),r||Vt(u,e),d(bn(u),e,{extract:i,version:o}).then((function(t){try{return a(h=t)?f:(R("Found pin "+e+" in board "+u),[1])}catch(e){return p(e)}}),p)):[1]}return(s=function(e){for(;e;){if(e.then)return void e.then(s,p);try{if(e.pop){if(e.length)return e.pop()?g.call(this):e;e=f}else e=e.call(this)}catch(e){return p(e)}}}.bind(this))(f);function g(){return m.call(this)}}function m(){return a(h)?p(new Error("Failed to retrieve '"+e+"' pin.")):v.call(this)}return m.call(this)}catch(e){return p(e)}}.bind(this),p):(r||Vt(n,e),hn(bn(n),e,Object.assign.apply(Object,[{extract:i,version:o}].concat(f))).then(function(e){try{return h=e,v.call(this)}catch(e){return p(e)}}.bind(this),p));function v(){return g=Kt(h),a(g.type)&&(g.type="files"),m=u(h).filter((function(e){return!new RegExp("^"+Qt()).test(e)})),m=w.list(m,{fullNames:!0}),"files"==g.type&&m.length>1&&(m=m.filter((function(e){return!/\/data\.txt$/g.test(e)}))),a(s)||(pinVersionSignature(m),s===pin_signature)?t(c?l(m):On({_content:h,class:g.type})):p(new Error("Pin signature '"+pin_signature+"' does not match given signature."))}}))},kn=function(e,t){var n=t.board,r=t.name,i=t.extended,o=t.metadata,c=xn(t,["board","name","extended","metadata"]);return new Promise((function(t,s){var l,f,p,d,h;(a(n)||0==n.length)&&(n=yn()),e="string"==typeof(h=e)?function(e){void 0===e&&(e="");var t=e.split("/"),n=t[0];return t.pop(),{name:n,owner:t.join("/")}}(h).name:h,a(e)&&!a(r)&&(e=r),l=F(null,{name:"character",description:"character",type:"character",metadata:"character",board:"character"}),n=u(n);var g,m,v,y=[];for(g in n)y.push(g);function b(){if(!y.length)return[1];m=y.shift(),f=n[m],p=bn(f),d=null;var t=function(){try{return!0===i&&(d=d.map((function(e){return e.hasOwnProperty("metadata")&&(Object.assign(e,e.metadata),delete e.metadata),e}))),d.length>0&&(r=d,a=F(d.map((function(e){return Object.assign(e,{board:f})})),{board:"character"}),o=r.map((function(e,t){var n={};return Object.assign(n,e),Object.assign(n,a[t]),n})),c=Object.assign({},r.columns),Object.assign(c,a.columns),d=F(o,c),t=d,(n=[].concat(e=l).concat(t)).columns={},Object.assign(n.columns,e.columns),Object.assign(n.columns,t.columns),l=n),b}catch(e){return s(e)}var e,t,n,r,a,o,c},a=function(e){try{return R("Error searching '"+f+"' board: "+e),d=F(null,{name:"character",description:"character",rows:"numeric",cols:"numeric",class:"numeric"}),t()}catch(e){return s(e)}};try{return function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new Promise((function(r,i){return r(ln.apply(void 0,["boardPinFind",e,t].concat(n)))}))}(p,e,Object.assign.apply(Object,[{name:r,extended:i}].concat(c))).then((function(e){try{return d=e,t()}catch(e){return a(e)}}),a)}catch(e){a(e)}}return(v=function(e){for(;e;){if(e.then)return void e.then(v,s);try{if(e.pop){if(e.length)return e.pop()?w.call(this):e;e=b}else e=e.call(this)}catch(e){return s(e)}}}.bind(this))(b);function w(){return a(e)||(l=l.filter((function(t){return t.name===e||!a(t.description)&&new RegExp(e,"i").test(t.description)}))),o||(l=function(e,t){var n={};Object.assign(n,e.columns),Object.keys(n).includes(t)&&delete n[t];var r=e.map((function(e){var n={};return Object.assign(n,e),Object.keys(n).includes(t)&&delete n[t],n}));return F(r,n)}(l,"metadata")),a(r)||(l=l.filter((function(e){return new RegExp("(.*/)?"+r+"$").test(e.name)}))).length&&(l=l.filter((function(e,t){return 0===t}))),l=l.sort((function(e,t){return e.name<t.name})),t(l)}}))},On=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return fn.apply(void 0,["pinLoad",e].concat(t))},En=Object.freeze({kaggle:"kaggle"}),Cn=function(e,t){var n=v(e),r=new Error("Can't auto-generate pin name from object, please specify the 'name' parameter.");if(!n)throw r;var i=n.replace(/[^a-zA-Z0-9-]/g,"-").replace(/^-*|-*$/g,"").replace(/-+/g,"-");if(!i)throw r;return t===En.kaggle&&i.length<5?i+"-pin":i},jn=function(e,t){var n,r=["rows","cols","name","description"];return(n=t,a(n)?[]:Object.keys(n)).forEach((function(n){if("columns"===n){var i=["name","type"];Array.isArray(e.columns)&&(e.columns=e.columns.map((function(t,n){return{name:Object.keys(e.columns)[n],type:e.columns[n]}}))),t.columns.forEach((function(t){var n=metadata$columns.filter((function(n,r){return e.columns[r].name===t.name}));1==n.length&&Object.keys(t).forEach((function(r){i.includes(r)||(e.columns[n][r]=t[r])}))}))}else r.includes(n)||(e[n]=t[n])})),e},Sn=function(){return r.get("fetch")};var In=function(e,t){var n=t.name,r=t.component,i=t.extract,a=t.customEtag;void 0===a&&(a="");t.removeQuery,t.config;var o=t.headers,c=(t.canFail,t.cache);void 0===c&&(c=!0);var u=t.contentLength;void 0===u&&(u=0);var s=t.subpath,l=t.details;void 0===l&&(l={});var f=t.download;return void 0===f&&(f=!0),new Promise((function(t,p){var d,h,g,y,b,x,k,E,C,j,I;if(s||(s=n),d=Sn(),h=!c,n=n.replace("^https?://",""),g=Ut(r,s),!f)return t(g);(y=m(),w.create(y),b=function(e,t){return Rt((function(){return qt(e,t)}))}(n,r)||{},x=b.cache,k=!0,E=0,x)?(I=Object.keys(x).map((function(e){return x[e].url})),-1===(E=I.findIndex((function(t){return t===e})))?(x={},E=I.length+1):(x=x[E],k=!1)):(b.cache={},x={},E=1);if((c={}).etag=x.etag||"",c.maxAge=x.maxAge||0,c.changeAge=x.changeAge||(new Date).getTime()-c.maxAge,c.url=e,null,R("Checking 'changeAge' header (time, change age, max age): "+new Date+", "+c.changeAge+", "+c.maxAge),l.somethingChanged=!1,(new Date).getTime()>=c.changeAge+c.maxAge||h){var P,F;return a&&a.length?(R("Using custom 'etag' (old, new): "+x.etag+", "+a),c.etag=a,T.call(this)):d(e,{method:"HEAD",headers:o}).then(function(e){try{return(F=e)&&(c.etag=F.headers.etag||"",c.changeAge=(new Date).getTime(),c.maxAge=function(e){if(!e)return null;var t=new RegExp("max-age").test(e);return 1!==t.length?null:(t=e.replace(/.*max-age=/,""),parseFloat(t.replace(/,.*$/,"")))}(F.headers["cache-control"])||2*c.changeAge,u=F.headers["content-length"],R("Checking 'etag' (old, new):  "+x.etag+", "+c.etag)),T.call(this)}catch(e){return p(e)}}.bind(this),p);function T(){var t,n,r;if(P=c.etag||x.etag!==c.etag,k||P||h)return t=v(e),n=O(y,t),R("Downloading "+e+" to "+n),l.somethingChanged=!0,d(e).then((function(t){return t.ok||R("Failed to download remote file: "+e),t})).then(function(e){try{if((r=e).ok)return r.headers["content-type"],r.text().then(function(e){try{return A(e,n),t.call(this)}catch(e){return p(e)}}.bind(this),p);function t(){return i.call(this)}return t.call(this)}catch(e){return p(e)}}.bind(this),p);function i(){return _.call(this)}return i.call(this)}}function _(){return(C=b.cache)[E]=c,i&&(i=!0),w.list(y,{fullNames:!0}).forEach((function(e){S(e,g,{overwrite:!0,recursive:!0})})),j=g.replace(Ut(r,""),""),Gt(n,r,{path:b.path||j,cache:C}),t(g)}return _.call(this)}))},Pn=function(e,t){var n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(t,[]);return new Promise((function(t,r){return In(e,n).then((function(e){try{return t(e)}catch(e){return r(e)}}),r)}))};var Fn=function(e,t){var n=Object.assign({retrieve:!0},t),c=n.path,s=n.description,l=n.type,f=n.metadata,d=n.extract,h=n.retrieve,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(n,["path","description","type","metadata","extract","retrieve"]);c=u(c);var y=g.customMetadata,b=g.zip;a(d)&&(d=!0);var x=bn(e),A=t.name||function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=[],i=0;i>e.length;i++)r.push(fun.apply(void 0,[e[i]].concat(t)));return r}(pinPath);R("Storing "+A+" into board "+x.name+" with type "+l),g.cache||Vt(x,A),c=c.filter((function(e){return!/data\.txt/g.test(e)}));var k=m();return w.create(k),L((function(){return unlink(k,{recursive:!0})}),(function(){if(1==c.length&&/^http/g.test(c)&&!/\\.[a-z]{2,4}$/g.test(c)&&o("pins.search.datatxt",!0)){var e=O(c,"data.txt"),t=Pn(e,A,_());t&&(manifest=Kt(t),c=c+"/"+manifest[c],d=!1)}var n=!1;if(b){var u=function(e){var t=e[0];return function(e,t){for(i in e)if(!t(i))return!1;return!0}(e,(function(e){return startsWith(e)}))||t===C(t)?t:u(C(t[0]))},m=u(c);w.zip(m.map((function(e){return e.replace(common_path+"/","")})),O(k,"data.zip"),m),n=!0}else c.forEach((function(e,t){var i={somethingChanged:!0};if(/^http/g.test(e)&&(e=Pn(e,A,_(),Object.assign({extract:d,details:i,canFail:!0},opt)),!a(i.error))){try{An(A,{board:_()})}catch(e){}if(a(null))throw new Error(i.error);return R(i.error),null}if(i.somethingChanged){var c=function(e,t){j(e)&&I(e)>=o("pins.link.size",2)?(O(t,v(e)),r.get("createLink")(O)):S(e,t,{recursive:!0})};if(w.exists(e))for(entry in w.list(e,{fullNames:!0}))c(entry,k);else c(e,k);n=!0}}));return n&&(function(e){return j(O(e,"data.txt"))}(k)||(f.description=s,f.type=l,f=jn(f,y),Zt(k,f,w.list(k,{recursive:!0}))),pn.apply(void 0,[x,k,A,f].concat(g)),p(x)),h?An(A,Object.assign.apply(Object,[{board:x.name}].concat(g))):null}))};var Tn=function(e,t,n,r){if(void 0===n&&(n="GET"),e.url&&(t=t.replace("^"+e.url+"/?","")),"function"==typeof e.headers)return e.headers(e,n,t,r);if(e.headers&&(e.headers.length||"string"==typeof e.headers||e.headers.request)||!e.headers)return e.headers;throw"Unsupported class for board headers: "+typeof e.headers},_n=function(e,t){if(void 0===t&&(t=!1),!j(e)&&t)return[];var n=y(e).join("\n"),r=Nt.safeLoad(n);return r.map?r:[r]},Nn=function(e){var t=Nt.safeLoad(e);return t.map?t:[t]};function Ln(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var Rn=function(e){return new Promise((function(t,n){var r,i,a,o,c,u,s,l;return e.url?(r="data.txt",e.indexRandomize&&(r+="?rand="+Math.round(1e8*Math.random())),i=O(e.url,r),Sn()(i,{headers:Tn(e,"data.txt")}).then((function(t){if(t.ok)return t.text();throw new Error("Failed to retrieve data.txt file from "+e.url+".")})).then((function(r){try{return a=r,o=m(),w.create(o),A(a,o),c=O(N(e),"data.txt"),u=_n(c,!0),s=(s=_n(o)).map((function(e){var t=u.filter((function(t){return t.path===e.path}));return 1==t.length&&(e.cache=t[0].cache),e})),u=s,l=Nt.safeDump(u),b(c,l.split("\n")),t()}catch(e){return n(e)}}),n)):n(new Error("Invalid 'url' in '"+e.name+"' board."))}))},Dn=function(e,t,n){var r=_n(O(N(e),"data.txt"));if(!(r=r.filter((function(e){return e.name===t}))).length&&e.needsIndex)throw new Error("Could not find '"+t+"' pin in '"+e.name+"' board.");var i=null;i=r.length?r[0]:[{path:t}];var a=new RegExp(".*/.*\\.[a-zA-Z]+$").test(i.path)?C(i.path):i.path;return{pathGuess:a=new RegExp("^https?://").test(a)?a:O(e.url,a),indexEntry:i}},Mn=function(e,t,n,r){return new Promise((function(r,i){var a,o,c,u;return a=Dn(e,t),o=a.pathGuess,c=a.indexEntry,u=O(o.slice(0,-6),"data.txt"),Pn(u,{name:t,component:e,canFail:!0,download:n,headers:Tn(e,u)}).then((function(e){try{return r({pathGuess:o,indexEntry:c,downloadPath:u})}catch(e){return i(e)}}),i)}))},zn=function(e){var t=e.board,n=e.name,r=e.files,i=e.path;return new Promise((function(e,a){return r.forEach((function(e){return new Promise((function(r,a){var o,c,u,s;return o=O(n,e),c=O(t.url,o),u=E(O(i,e)),Sn()(c,{method:"PUT",body:u,headers:Tn(t,o,"PUT",u)}).then((function(t){try{return(s=t).ok?r():a(new Error("Failed to upload '"+e+"' to '"+c+"'. Error: "+s.statusText))}catch(e){return a(e)}}),a)}))})),e()}))},Un=function(e){var t=e.board,n=e.path,r=e.operation,i=e.name,a=e.metadata;return new Promise((function(e,o){var c,u,s,l,f,p,d,h,g,m;return c="data.txt",u=O(t.url,c),s="data.txt",t.indexRandomize&&(s=c+"?rand="+(10*Math.random()^8)),(l=Sn())(O(t.url,s),{headers:Tn(t,s)}).then(function(s){try{return p=[],(f=s).ok?f.text().then(function(e){try{return p=Nn(e),v.call(this)}catch(e){return o(e)}}.bind(this),o):"remove"===r?o(new Error("Failed to retrieve latest data.txt file, the pin was partially removed.")):v.call(this);function v(){if(d=p.map((function(e){return e.path===n})),(h=d.length?d.filter((function(e){return e})):p.length+1).length||(h=p.length+1),"create"===r)a.columns=null,p[h]=[],p[h].push({path:n}),i&&p[h].push({name:i}),p[h].push(a);else{if("remove"!==r)return o(new Error("Operation "+r+" is unsupported."));h<=p.length&&(p[h]=null)}return c=O(N(t),"data.txt"),function(e,t){var n=Nt.safeDump(e);b(t,n.split("\n"))}(p,c),g=E(c),l(u,{method:"PUT",body:g,headers:Tn(t,"data.txt","PUT",g)}).then(function(n){try{return(m=n).ok?(t.indexUpdated&&"create"===r&&t.indexUpdated(t),e()):m.text().then((function(e){try{return o(new Error("Failed to update data.txt file: "+e))}catch(e){return o(e)}}),o)}catch(e){return o(e)}}.bind(this),o)}}catch(e){return o(e)}}.bind(this),o)}))},Gn=function(e,t){return new Promise((function(n,r){var i,a,o,c,u,s,l,f,p,d,h;return o=(i=t).url,c=i.browseUrl,u=i.headers,s=i.bucket,l=i.indexUpdated,f=void 0!==(f=i.indexRandomize)&&f,p=void 0===(p=i.needsIndex)||p,d=void 0===(d=i.cache)?g():d,a=Ln(i,["url","browseUrl","headers","bucket","indexUpdated","indexRandomize","needsIndex","cache"]),h=a,o?(e.url=o.replace(/(\/)?data.txt$/g,""),e.headers=u,e.needsIndex=p,e.browseUrl=c||o,e.indexUpdated=l,e.bucket=s,e.indexRandomize=f,Object.keys(h).forEach((function(t){e[t]=h[t]})),Rn(e).then((function(t){try{return n(e)}catch(e){return r(e)}}),r)):r(new Error("The 'datatxt' board requires a 'url' parameter."))}))},qn=function(e,t,n){return new Promise((function(r,i){var o,c,u,s,l,f,p,d,h,g;return c=(o=n).extract,u=o.version,s=void 0===(s=o.download)||s,Ln(o,["extract","version","download"]),Mn(e,t,s).then(function(n){try{if(f=(l=n).indexEntry,p=l.pathGuess,d=l.downloadPath,h=Ut(e,t),g=Kt(h),u)return g.versions.includes(u)||(u=rn(g.versions,u)),d=O(p,O(u,"data.txt")),h=O(h,u),Pn(d,{name:t,component:e,canFail:!0,headers:Tn(e,d),subpath:O(t,u)}).then(function(e){try{return g=Kt(h),p=O(p,u),o.call(this)}catch(e){return i(e)}}.bind(this),i);function o(){var n;g?(d=f.path,(n=function(e){var t=Kt(e);return a(t.path)?null:pinFetch({path:t.path,class:t.type})}(h))?(d="",d=new Regexp("^https?://").test(n)?n:O(p,n)):(f.path=null,Zt(h,f,f.path))):d=O(e.url,t);return new RegExp("https?://").test(d)||(d=O(e.url,d)),Pn(d,{name:t,component:e,extract:c,download:s,headers:Tn(e,d)}).then((function(e){try{return r(h=e)}catch(e){return i(e)}}),i)}return o.call(this)}catch(e){return i(e)}}.bind(this),i)}))},$n=function(e,t,n){return new Promise((function(t,r){var i,a;return Rn(e).then(function(o){try{if(i=_n(O(N(e),"data.txt")),n.extended)return t(i);var c,u,s,l;if(a=i.map((function(e){return{name:e.name||v(e.path),description:e.description||"",type:e.type||"files",metadata:e,stringsAsFactors:!1}})),n.name&&(a=a.filter((function(e){return e.name===agrs.name}))),1===a.length)return c=JSON.parse(a[0].metadata),u=new RegExp("\\.[a-zA-Z]+$").test(c.path)?C(c.path):c.path,s=O(e.url,O(u,"data.txt")),fetch(s,{headers:Tn(e,s)}).then(function(e){try{var t;if((l=e).ok)return l.text().then(function(e){try{return t=Nn(e),c=Jt(c,t),a.metadata=c,n.call(this)}catch(e){return r(e)}}.bind(this),r);function n(){return f.call(this)}return n.call(this)}catch(e){return r(e)}}.bind(this),r);function f(){return t(a)}return f.call(this)}catch(e){return r(e)}}.bind(this),r)}))},Hn=function(e,t,n,r,i){return new Promise((function(i,a){var o;return en(e,n,t),o=w.list(t,{recursive:!0}),zn({board:e,name:n,files:o,path:t}).then((function(t){try{return Un({board:e,path:n,operation:"create",name:n,metadata:r}).then((function(e){try{return i()}catch(e){return a(e)}}),a)}catch(e){return a(e)}}),a)}))},Bn=function(e,t,n){return new Promise((function(n,r){var i,a;return(i=function(e,t){return new Promise((function(n,r){if(1!==$n(e,e.name,{metadata:!0}).length)return r(new Error("Pin '"+t+"' not found."));var i=results[0].metadata,a=i.path;return i.versions.forEach((function(n){return new Promise((function(r,i){var o,c,u,s,l;return o=Dn(e,t).pathGuess,c=O(O(o,n),"data.txt"),u=O(Ut(e,t),n),s=O(t,n),Pn(c,{name:t,component:e,canFail:!0,headers:Tn(e,c),subpath:s}).then((function(e){try{return l=Kt(u),a=a.concat([O(s,l.path),O(s,"data.txt")]),r()}catch(e){return i(e)}}),i)}))})),n(a)}))}(e,t)).push(O(t,"data.txt")),a=Sn(),i.forEach((function(t){return new Promise((function(n,r){var i,o;return i=O(e.url,t),a(i,{method:"DELETE",headers:Tn(e,t,"DELETE")}).then(function(i){try{if(!(o=i).ok)return o.text().then(function(n){try{return console.warning("Failed to remove '"+t+"' from '"+e.name+"' board. Error: "+n),a.call(this)}catch(e){return r(e)}}.bind(this),r);function a(){return n()}return a.call(this)}catch(e){return r(e)}}.bind(this),r)}))})),Un({board:e,path:t,operation:"remove",name:t}).then((function(i){try{return unlink(Ut(e,t),{recursive:!0}),n()}catch(e){return r(e)}}),r)}))},Wn=function(e,t,n){return new Promise((function(r,i){var a,o;return o=void 0===(o=(a=n).download)||o,Ln(a,["download"]),Mn(e,t,o).then((function(n){try{return r(tn(e,t))}catch(e){return i(e)}}),i)}))};var Yn=function(e,t,n,i){var a=(new Date).toUTCString(),o=e.bucket;if(new RegExp("^https?://").test(n)){var c=n.replace("^https?://","");n=c.replace("^[^/]+/",""),o=c.replace("//..*","")}var u=[t,"","application/octet-stream","","x-amz-date:"+a,O("/"+o,n)].join("\n"),s=r.get("crypto"),l=s.HmacSHA1(u,e.secret||"").toString(s.enc.Base64);return{Host:o+"."+e.host,"x-amz-date":a,"Content-Type":"application/octet-stream",Authorization:"AWS "+e.key+":"+l}},Vn=function(e,t){return new Promise((function(n,i){var a,o,c,u,s,l,f,p,d;return o=r.get("env"),c=void 0===(c=(a=t).bucket)?o("AWS_BUCKET"):c,u=void 0===(u=a.key)?o("AWS_ACCESS_KEY_ID"):u,s=void 0===(s=a.secret)?o("AWS_SECRET_ACCESS_KEY"):s,l=a.cache,f=void 0===(f=a.host)?"s3.amazonaws.com":f,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(a,["bucket","key","secret","cache","host"]),e.bucket=c,c?u?s?(d=Object.assign({},p,{name:e.name,url:"http://"+c+"."+f,cache:l,headers:Yn,needsIndex:!1,key:u,secret:s,bucket:c,connect:!1,browseUrl:"https://s3.console.aws.amazon.com/s3/buckets/"+c+"/",host:f}),Gn(e,d).then((function(t){try{return n(e)}catch(e){return i(e)}}),i)):i(new Error("The 's3' board requires a 'secret' parameter.")):i(new Error("The 's3' board requires a 'key' parameter.")):i(new Error("The 's3' board requires a 'bucket' parameter."))}))},Kn=function(e){return"txt"===e.split(".").pop()?"text/plain":""};var Zn=function(e,t,n,i){var a=(new Date).toUTCString(),o="2015-04-05",c=e.container,u=e.account;if(new RegExp("^https?://").test(n)){var s=n.replace("^https?://",""),l=s.replace("^[^/]+/","");u=s.replace("\\..*",""),n=l.replace("^[^/]+/",""),c=l.replace("/.*","")}var f="",p="";i&&(f=I(i),p=Kn(i));var d=[t,"\n",f,"",p,"\n\n\n\n\n","x-ms-blob-type:BlockBlob","x-ms-date:"+a,"x-ms-version:2015-04-05","/"+u+"/"+c+"/"+n].join("\n"),h=r.get("crypto");return{"x-ms-date":a,"x-ms-version":o,"x-ms-blob-type":"BlockBlob",Authorization:"SharedKey "+u+":"+h.HmacSHA1(d,e.secret||"").toString(h.enc.Base64)}},Jn=function(e,t){return new Promise((function(n,i){var a,o,c,u,s,l,f,p,d;return o=r.get("env"),c=void 0===(c=(a=t).container)?o("AZURE_STORAGE_CONTAINER"):c,u=void 0===(u=a.account)?o("AZURE_STORAGE_ACCOUNT"):u,s=void 0===(s=a.key)?o("AZURE_STORAGE_KEY"):s,l=a.cache,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(a,["container","account","key","cache"]),c?u?s?(p="https://"+u+".blob.core.windows.net/"+c,d=Object.assign({},f,{name:e.name,url:p,cache:l,headers:Zn,needsIndex:!1,container:c,account:u,key:s,connect:!1,browseUrl:"https://portal.azure.com"}),Gn(e,d).then((function(t){try{return n(bn(e.name))}catch(e){return i(e)}}),i)):i(new Error("The 'azure' board requires a 'key' parameter.")):i(new Error("The 'azure' board requires an 'account' parameter.")):i(new Error("The 'azure' board requires a 'container' parameter."))}))};var Qn=function(){var e=r.get("env")("gcloud.binary.path"),t=r.get("getOption")("gcloud.binary.path"),n=e||(t||"");return n?E(n):(function(e){var t=r.get("env"),n=r.get("which");if("win32"===r.get("platform")()){var i=E(t("localappdata"),{winslash:"/"}),a=O("Google/Cloud SDK/google-cloud-sdk/bin",e+".cmd");return[function(){return O(i,a)},function(){return O(t("ProgramFiles"),a)},function(){return O(t("ProgramFiles(x86)"),a)}]}var o=e;return[function(){return n(o)},function(){return"~/google-cloud-sdk/bin/"+o},function(){return O(t("GCLOUD_INSTALL_PATH")||"~/google-cloud-sdk",O("bin",o))}]}("gcloud").forEach((function(e){if(j(e()))return E(e())})),null)},Xn=function(e){return new Promise((function(t,n){var r,i;return r={cacheControl:"private, max-age=0, no-transform",name:"data.txt"},Sn()("https://storage.googleapis.com/storage/v1/b/"+e.bucket+"./o/"+data.txt,Object.assign({method:"PATCH",body:r},Tn(e,"o/data.txt","PATCH"))).then(function(e){try{if(!(i=e).ok)return i.text().then(function(e){try{return console.warning("Failed to update data.txt metadata: "+e),r.call(this)}catch(e){return n(e)}}.bind(this),n);function r(){return t()}return r.call(this)}catch(e){return n(e)}}.bind(this),n)}))},er=function(e,t,n,r){var i=null;return r&&(i=Kn(r)),{Authorization:"Bearer "+e.token,"Content-Type":i}},tr=function(e,t){return new Promise((function(n,i){var a,o,c,u,s,l,f,p;if(o=r.get("env"),c=void 0===(c=(a=t).bucket)?o("GCLOUD_STORAGE_BUCKET"):c,u=void 0===(u=a.token)?o("GOOGLE_STORAGE_ACCESS_TOKEN"):u,s=a.cache,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(a,["bucket","token","cache"]),!c)return i(new Error("Board 'gcloud' requires a 'bucket' parameter."));if(!u){var d;if(!(d=Qn()))return i(new Error("Board 'gcloud' requires an 'access' parameter with a Google Cloud Access Token."));u=r.get("exec")(d+" 'auth', 'print-access-token'")}return f="https://storage.googleapis.com/"+c,p=Object.assign({},l,{name:e.name,url:f,headers:er,cache:s,bucket:c,token:u,browse_url:"https://console.cloud.google.com/storage/browser/"+c,indexRandomize:!0,indexUpdated:Xn}),Gn(e,p).then((function(t){try{return n(boardGet(e.name))}catch(e){return i(e)}}),i)}))};var nr=function(e,t,n,i){var a=(new Date).toUTCString(),o=e.space;if(new RegExp("^https?://").test(n)){var c=u.replace("^https?://",""),u=c.replace("^[^/]+/","");o=c.replace("\\..*","")}var s=[t,"","application/octet-stream",a,O(o,n)].join("\n"),l=r.get("crypto"),f=l.HmacSHA1(s,e.secret||"").toString(l.enc.Base64);return{Host:o+"."+e.datacenter+"."+e.host,Date:a,"Content-Type":"application/octet-stream",Authorization:"AWS "+e.key+":"+f}},rr=function(e,t){return new Promise((function(n,i){var a,o,c,u,s,l,f,p,d,h,g;return o=r.get("env"),c=void 0===(c=(a=t).space)?o("DO_SPACE"):c,u=void 0===(u=a.key)?o("DO_ACCESS_KEY_ID"):u,s=void 0===(s=a.secret)?o("DO_SECRET_ACCESS_KEY"):s,l=void 0===(l=a.datacenter)?o("DO_DATACENTER"):l,f=a.cache,p=void 0===(p=a.host)?"digitaloceanspaces.com":p,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(a,["space","key","secret","datacenter","cache","host"]),c?u?s?l?(e.space=c,h="https://"+e.space+"."+l+"."+p,g=Object.assign({},d,{name:e.name,url:h,cache:f,headers:nr,key:u,secret:s,space:c,datacenter:l,browseUrl:"https://cloud.digitalocean.com/spaces/"+c,host:p}),Gn(e,g).then((function(t){try{return n(boardGet(e.name))}catch(e){return i(e)}}),i)):i(new Error("The 'dospace' board requires a 'datacenter' parameter.")):i(new Error("The 'dospace' board requires a 'secret' parameter.")):i(new Error("The 'dospace' board requires a 'key' parameter.")):i(new Error("The 'dospace' board requires a 'space' parameter."))}))},ir=function(e,t){return n("getFunction")(e,t)},ar=function(e,t){return new Promise((function(n,r){var i,a,o,c;return i=""+e.server+t,a=Sn(),o=function(e,t,n,r){var i={};return or(e)?i.Authorization="Key "+e.key:i=rsconnectTokenHeaders(e,rsconnectUrlFromPath(e,t),n,r),i["Content-Type"]="application/json",i}(e,t,"GET"),a(i,{headers:o}).then(function(e){try{return(c=e).ok?c.json().then(n,r):c.text().then((function(e){try{return r(new Error("Failed to retrieve "+i+": "+e))}catch(e){return r(e)}}),r)}catch(e){return r(e)}}.bind(this),r)}))},or=function(e){return!!e.key},cr=function(e){var t={accounts:ir("accounts","rsconnect"),accountInfo:ir("accountInfo","rsconnect"),serverInfo:ir("serverInfo","rsconnect"),signatureHeaders:ir("signatureHeaders","rsconnect"),httpFunction:ir("httpFunction","rsconnect")};if(!t.accounts)throw new Error("RStudio Connect is not registered, please install the 'rsconnect' package or specify an API key.");var n=t.accounts();if(!n)throw new Error("RStudio Connect is not registered, please add a publishing account or specify an API key.");if(e.server||(e.serverName=n.server[1]),e.account||(e.account=n[n.server===e.serverName].name),1!==e.account.length)throw new Error("Multiple accounts ("+e.account.join(", ")+") are associated to this server, please specify the correct account parameter in board_register().");return e.server=t.serverInfo(e.serverName).url.replace("/__api__",""),e},ur=function(e){return new Promise((function(t,n){return function(e){return new Promise((function(t,n){var r;return ar(e,"/__api__/server_settings").then((function(e){try{return r=e.version,t(r)}catch(e){return n(e)}}),n)}))}(e).then((function(e){try{return t(e>"1.7.7")}catch(e){return n(e)}}),n)}))};function sr(e,t){t=t||",";for(var n=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),r=[[]],i=null;i=n.exec(e);){var a=i[1];if(a.length&&a!=t&&r.push([]),i[2])var o=i[2].replace(new RegExp('""',"g"),'"');else o=i[3];r[r.length-1].push(o)}return r}var lr=function(e,t){try{return function(e,t){if(e.length>0){var n=Object.keys(e[0]).join(",");b(t,n)}var r=e.map((function(e){return Object.keys(e).map((function(t){return e[t]})).join(",")}));b(t,r)}(e,t)}catch(e){R("Failed to save data frame as CSV file: "+e)}};return sn("pin","default",(function(e,t){void 0===t&&(t={}),D("pinDefault",{x:e,opts:t});var n=t.description,r=t.board,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(t,["description","board"]),a=t.name||Cn(e,r),o=m();return w.create(o),A(JSON.stringify(e),O(o,"data.json")),Fn(r,Object.assign.apply(Object,[{},{name:a,description:n,path:o,type:"default",metadata:[]}].concat(i)))})),sn("pin","string",(function(e,t){void 0===t&&(t={name:null,description:null,board:null});var n=t.name,r=t.description,i=t.board,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(t,["name","description","board"]),o=u(e),c=o.length>0?"zip":x.fileExt(o);return Fn(i,Object.assign.apply(Object,[{},{name:n,description:r,path:o,type:"files",metadata:{extension:c}}].concat(a)))})),sn("pin","dataframe",(function(e,t){void 0===t&&(t={name:null,description:null,board:null});var n=t.name,r=t.description,i=t.board,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(t,["name","description","board"]);a(n)&&(n=Cn(e,i));var c=m();return w.create(c),A(JSON.stringify(e),O(c,"data.json")),lr(e,O(c,"data.csv")),L((function(){return unlink(c)}),(function(){var t,a=(t=e).hasOwnProperty("columns")?Object.keys(t.columns):t.length>0?Object.keys(t[0]):[];e.length,a.length;return Fn(i,Object.assign.apply(Object,[{},{name:n,description:r,path:c,type:"table",metadata:[]}].concat(o)))}))})),sn("pinPreview","default",(function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return e})),sn("pinLoad","default",(function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return JSON.parse(k(O(e,"data.json")))})),sn("pinFetch","default",(function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.path})),sn("pinLoad","files",(function(e,t){!function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r])}(t,[]);return w.list(e,{recursive:!0,fullNames:!0}).filter((function(e){return!/data\.txt$/g.test(e)}))})),sn("pinLoad","table",(function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=O(e,"data.json"),i=O(e,"data.csv"),a=null;if(j(r))a=JSON.parse(y(r).join("\n\r"));else{if(!j(i))throw new Error("A 'table' pin requires CSV or JSON files.");a=sr(y(i).filter((function(e){return e})).join("\n"))}return a})),sn("boardBrowse","default",(function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return null})),sn("boardPinVersions","default",(function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return F(null,{version:"character"})})),sn("boardInitialize","default",(function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];throw new Error("Board '"+e.name+"' is not a valid board.")})),sn("boardInitialize","local",(function(e,t){an(t,[]);return w.exists(e.cache)||w.create(e.cache,{recursive:!0}),e})),sn("boardPinCreate","local",(function(e,t,n,r){for(var i=[],a=arguments.length-4;a-- >0;)i[a]=arguments[a+4];en(e,n,t);var o=Ut(e,n),c=w.list(o,{fullNames:!0}).filter((function(e){return/(\/|\\)_versions/gi.test(e)}));w.remove(c,{recursive:!0}),w.exists(o)||w.create(o),S(w.list(t,{fullNames:!0}),o,{recursive:!0}),r.columns=null;var u=N(e);return Gt(n,e,Object.assign({path:Wt(o,{basePath:u})},r))})),sn("boardPinFind","local",(function(e,t,n){an(n,[]);var r=function(e,t){var n=Ht(t);return L((function(){return Bt(n)}),(function(){var n=Mt(t),r=Lt(n);return"string"==typeof e&&e.length>0&&(r=r.filter((function(t){return new RegExp(e,"gi").test(t.name)}))),r}))}(t,e);if(1==r.length){var i=r[0].metadata,a=Yt(i.path,e),o=Kt(a),c=Jt(i,o);r[0].metadata=c}return r})),sn("boardPinGet","local",(function(e,t,n){var r=an(n,[]).version,i=function(e,t){return qt(e,t).path}(t,e);if(!a(r)){var o=Kt(Yt(i,e));o.versions.includes(r)||(r=rn(o.versions,r)),i=O(t,r)}return Yt(i,e)})),sn("boardPinRemove","local",(function(e,t){return function(e,t,n){void 0===n&&(n=!0);var r=Mt(t);e=$t(e,r);var i=r.filter((function(t){return t.name==e}));if(i.length>0){i=i[0],r=r.filter((function(t){return t.name!=e}));var a=Yt(i.path,t);return n&&w.remove(a,{recursive:!0}),zt(r,t)}}(t,e)})),sn("boardPinVersions","local",(function(e,t){return tn(e,t)})),sn("boardInitialize","datatxt",Gn),sn("boardPinCreate","datatxt",Hn),sn("boardPinFind","datatxt",$n),sn("boardPinGet","datatxt",qn),sn("boardPinRemove","datatxt",Bn),sn("boardPinVersions","datatxt",Wn),sn("boardInitialize","s3",Vn),sn("boardPinCreate","s3",Hn),sn("boardPinFind","s3",$n),sn("boardPinGet","s3",qn),sn("boardPinRemove","s3",Bn),sn("boardPinVersions","s3",Wn),sn("boardInitialize","azure",Jn),sn("boardInitialize","gcloud",tr),sn("boardInitialize","dospaces",rr),sn("boardInitialize","rsconnect",(function(e,t){return new Promise((function(n,i){var a,o,c;if(o=(a=r.get("env"))("CONNECT_API_KEY")||a("RSCONNECT_API"),!t.key&&o&&(t.key=o),c=a("CONNECT_SERVER")||a("RSCONNECT_SERVER"),!t.server&&c&&(t.server=c),t.server&&(e.server=t.server.replace("/$",""),e.serverName=t.server.replace("https?://|(:[0-9]+)?/.*","")),e.account=t.account,e.outputFiles=t.outputFiles,!t.key)return i(new Error("Invalid API key, the API key is empty."));if(e.key=t.key,e.key&&!e.server)return i(new Error("Please specify the 'server' parameter when using API keys."));or(e)||e.outputFiles||(e=cr(e));var u=function(){try{var t;if(!e.account)return ar(e,"/__api__/users/current/").then(function(n){try{return t=n.username,e.account=t,r.call(this)}catch(e){return i(e)}}.bind(this),i);function r(){return n(e)}return r.call(this)}catch(e){return i(e)}},s=function(t){try{return e.pinsSupported=!1,u()}catch(e){return i(e)}};try{return ur(e).then((function(t){try{return e.pinsSupported=t,u()}catch(e){return s()}}),s)}catch(e){s()}}))})),e.azureHeaders=Zn,e.boardConnect=mn,e.boardDeregister=function(e,t){if(void 0===t&&(t={}),!h().includes(e))throw"Board '"+e+"' is not registered";bn(e);return t.disconnect&&vn(e),function(e){delete d[e]}(e),null},e.boardDisconnect=vn,e.boardGet=bn,e.boardInitializeAzure=Jn,e.boardInitializeDospaces=rr,e.boardInitializeGCloud=tr,e.boardInitializeS3=Vn,e.boardList=yn,e.boardRegister=wn,e.callbacks=r,e.dospacesHeaders=nr,e.gcloudHeaders=er,e.pin=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return new Promise((function(n,r){return D("pin",Object.assign.apply(Object,[{x:e}].concat(t))),ln.apply(void 0,["pin",e].concat(t)).then((function(e){try{return n(l(e))}catch(e){return r(e)}}),r)}))},e.pinFetch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return fn.apply(void 0,["pinFetch"].concat(e))},e.pinFind=kn,e.pinGet=An,e.pinInfo=function(e,t){t.board;var n=t.extended,r=t.metadata,i=t.signature;xn(t,["board","extended","metadata","signature"]);return new Promise((function(t,a){var o,c,u,s;return function(e,t,n,r){return new Promise((function(i,a){var o;return kn(null,{name:e,board:t,metadata:!1,extended:!1}).then((function(c){try{return 0==(o=c).length?a(new Error("Pin '"+e+"' was not found.")):o.length>1?a(new Error("Pin '"+e+"' was found in multiple boards: "+o.board.join(",")+".")):(t=o[0].board,kn(null,{name:e,board:t,metadata:r,extended:n}).then((function(e){try{return i((o=e)[0])}catch(e){return a(e)}}),a))}catch(e){return a(e)}}),a)}))}(e,c,n,r).then(function(n){try{if(c=(o=n).board,r=[],Object.keys(o).includes("metadata")&&o.metadata.columns.length>0&&(r=o.metadata),i)return An(e,{board:c,files:!0}).then(function(e){try{return u=e,o.signature=pinVersionSignature(u),l.call(this)}catch(e){return a(e)}}.bind(this),a);function l(){for(e in delete(s=Object.assign(o)).metadata,[].concat(Object.keys(s)).forEach((function(e){!(s[e]instanceof Array)||1!=s[e].length||!(s[e][0]instanceof Array)||s[e][0].length>0||delete s[e]})),r)s[e]=r[e];return t(Object.assign(s,{class:"pin_info"}))}return l.call(this)}catch(e){return a(e)}}.bind(this),a)}))},e.pinLoad=On,e.pinPreview=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return fn.apply(void 0,["pinPreview",e].concat(t))},e.pinRemove=function(e,t){return function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];fn.apply(void 0,["boardPinRemove",e,t].concat(n))}(t=bn(t),e),p(t),null},e.pinVersions=function(e,t){var n=t.board,r=t.full;void 0===r&&(r=!1);xn(t,["board","full"]);var i=function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return fn.apply(void 0,["boardPinVersions",e,t].concat(n))}(bn(n),e);return r||(i.version=nn(i.version)),i},e.s3Headers=Yn,e}({});
//# sourceMappingURL=pins.min.js.map
