var pins=function(t){"use strict";var e={},n=function(t){return Object.keys(e).includes(t)?e[t]:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return null}},r={get:n,set:function(t,n){e[t]=n}},a=function(t){return null==t},o=function(t,e){var r=n("getOption")(t);return a(r)?e:r},c=function(t,e){return null!==e&&(t=t.concat(e)),t},u=function(t){return Array.isArray(t)?t:[t]},s=function(t){if(Array.isArray(t)){if(1!=t.length)throw new Error("Array has more than one element but expecting only one");t=t[0]}return t},l=function(t){return Array.isArray(t)&&1==t.length?t[0]:t},f=function(t,e){n("uiViewerRegister")(t,e)},p=function(t){n("uiViewerUpdated")(t)},d={},h=function(){return Object.keys(d)},g=function(){return o("pins.path",r.get("userCacheDir")("pins"))},m=function(){return r.get("tempfile")()},v=function(t){return r.get("basename")(t)},b=function(t){return r.get("readLines")(t)},y=function(t,e){return r.get("writeLines")(t,e)},w=Object.freeze({create:function(t,e){void 0===e&&(e={recursive:!1});e.recursive;return r.get("dirCreate")(t)},exists:function(t){return r.get("dirExists")(t)},list:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return r.get("dirList")(s(t))},remove:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return(t=u(t)).map((function(e){return r.get("dirRemove")(t)}))},zip:function(t,e,n){for(var i=[],a=arguments.length-3;a-- >0;)i[a]=arguments[a+3];return r.get("dirZip")(t,t,n)}}),x=Object.freeze({filePathSansExt:function(t){return t.replace(/\.[^/.]+$/,"")},fileExt:function(t){return t.match(/\.[^/.]+$/,"")[0]}}),A=function(t,e){return r.get("fileWrite")(t,e)},O=function(t){return r.get("fileRead")(t)},k=function(t,e){return r.get("filePath")(t,e)},E=function(t,e){void 0===e&&(e={winslash:"\\",mustWork:!1});e.winslash,e.mustWork;return t},C=function(t){return t.replace(/[^\/]+$/,"")},j=function(t){return r.get("fileExists")(t)},S=function(t,e,n){void 0===n&&(n={recursive:!0});var i=n.recursive;return r.get("fileCopy")(t,e,i)},P=function(t){return r.get("fileSize")(t)},I=function(t,e){return r.get("md5")(t,e)},F=function(t,e){var n=[];return a(t)||(n=t),n.columns=e,n},T=function(t){if(Array.isArray(t)){if(0===t.length||void 0!==t.columns)return!0;if(1===t.length&&"object"==typeof t[0])return!0;if(t.length>1){for(var e=!0,n=1;n<t.length;n++)if("object"!=typeof t[n]||t[n].length!==t[0].length){e=!1;break}return e}}return!1},_=function(){return o("pins.board","local")},N=function(t){var e=t.cache,n=k(e,t.name);return w.exists(n)||w.create(n,{recursive:!0}),E(n,{mustWork:!1})},L=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=null,r=null;try{r=t[t.length-1]()}catch(t){n=t}for(var i=0;i<t.length-2;i++)t[i]();if(null!==n)throw n;return r},D=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];o("pins.verbose",!0)&&r.get("pinLog")(t.join(""))},R=function(t,e){o("pins.verbose",!0)&&r.get("pinLog")("Calling "+t+"("+JSON.stringify(e)+")")};function M(t){return null==t}var U={isNothing:M,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:M(t)?[]:[t]},repeat:function(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var n,r,i,a;if(e)for(n=0,r=(a=Object.keys(e)).length;n<r;n+=1)t[i=a[n]]=e[i];return t}};function z(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}z.prototype=Object.create(Error.prototype),z.prototype.constructor=z,z.prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var G=z;function q(t,e,n,r,i){this.name=t,this.buffer=e,this.position=n,this.line=r,this.column=i}q.prototype.getSnippet=function(t,e){var n,r,i,a,o;if(!this.buffer)return null;for(t=t||4,e=e||75,n="",r=this.position;r>0&&-1==="\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>e/2-1){n=" ... ",r+=5;break}for(i="",a=this.position;a<this.buffer.length&&-1==="\0\r\nÂ…\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>e/2-1){i=" ... ",a-=5;break}return o=this.buffer.slice(r,a),U.repeat(" ",t)+n+o+i+"\n"+U.repeat(" ",t+this.position-r+n.length)+"^"},q.prototype.toString=function(t){var e,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(n+=":\n"+e),n};var $=q,W=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],B=["scalar","sequence","mapping"];var Y=function(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===W.indexOf(e))throw new G('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=function(t){var e={};return null!==t&&Object.keys(t).forEach((function(n){t[n].forEach((function(t){e[String(t)]=n}))})),e}(e.styleAliases||null),-1===B.indexOf(this.kind))throw new G('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function H(t,e,n){var r=[];return t.include.forEach((function(t){n=H(t,e,n)})),t[e].forEach((function(t){n.forEach((function(e,n){e.tag===t.tag&&e.kind===t.kind&&r.push(n)})),n.push(t)})),n.filter((function(t,e){return-1===r.indexOf(e)}))}function V(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach((function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new G("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=H(this,"implicit",[]),this.compiledExplicit=H(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,n=arguments,r={scalar:{},sequence:{},mapping:{},fallback:{}};function i(t){r[t.kind][t.tag]=r.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)n[t].forEach(i);return r}(this.compiledImplicit,this.compiledExplicit)}V.DEFAULT=null,V.create=function(){var t,e;switch(arguments.length){case 1:t=V.DEFAULT,e=arguments[0];break;case 2:t=arguments[0],e=arguments[1];break;default:throw new G("Wrong number of arguments for Schema.create function")}if(t=U.toArray(t),e=U.toArray(e),!t.every((function(t){return t instanceof V})))throw new G("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!e.every((function(t){return t instanceof Y})))throw new G("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new V({include:t,explicit:e})};var K=V,Z=new K({explicit:[new Y("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new Y("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new Y("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]});var J=new Y("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});var Q=new Y("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function X(t){return 48<=t&&t<=55}function tt(t){return 48<=t&&t<=57}var et=new Y("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=t.length,i=0,a=!1;if(!r)return!1;if("-"!==(e=t[i])&&"+"!==e||(e=t[++i]),"0"===e){if(i+1===r)return!0;if("b"===(e=t[++i])){for(i++;i<r;i++)if("_"!==(e=t[i])){if("0"!==e&&"1"!==e)return!1;a=!0}return a&&"_"!==e}if("x"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!(48<=(n=t.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;a=!0}return a&&"_"!==e}for(;i<r;i++)if("_"!==(e=t[i])){if(!X(t.charCodeAt(i)))return!1;a=!0}return a&&"_"!==e}if("_"===e)return!1;for(;i<r;i++)if("_"!==(e=t[i])){if(":"===e)break;if(!tt(t.charCodeAt(i)))return!1;a=!0}return!(!a||"_"===e)&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(i)))},construct:function(t){var e,n,r=t,i=1,a=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(e=r[0])&&"+"!==e||("-"===e&&(i=-1),e=(r=r.slice(1))[0]),"0"===r?0:"0"===e?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach((function(t){a.unshift(parseInt(t,10))})),r=0,n=1,a.forEach((function(t){r+=t*n,n*=60})),i*r):i*parseInt(r,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!U.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0"+t.toString(8):"-0"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),nt=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var rt=/^[-+]?[0-9]+e/;var it=new K({include:[Z],implicit:[J,Q,et,new Y("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!nt.test(t)||"_"===t[t.length-1])},construct:function(t){var e,n,r,i;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,i=[],"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:e.indexOf(":")>=0?(e.split(":").forEach((function(t){i.unshift(parseFloat(t,10))})),e=0,r=1,i.forEach((function(t){e+=t*r,r*=60})),n*e):n*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||U.isNegativeZero(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(U.isNegativeZero(t))return"-0.0";return n=t.toString(10),rt.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})]}),at=new K({include:[it]}),ot=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ct=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var ut=new Y("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==ot.exec(t)||null!==ct.exec(t))},construct:function(t){var e,n,r,i,a,o,c,u,s=0,l=null;if(null===(e=ot.exec(t))&&(e=ct.exec(t)),null===e)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(a=+e[4],o=+e[5],c=+e[6],e[7]){for(s=e[7].slice(0,3);s.length<3;)s+="0";s=+s}return e[9]&&(l=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(l=-l)),u=new Date(Date.UTC(n,r,i,a,o,c,s)),l&&u.setTime(u.getTime()-l),u},instanceOf:Date,represent:function(t){return t.toISOString()}});var st,lt=new Y("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}});function ft(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}try{st=ft("buffer").Buffer}catch(t){}var pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var dt=new Y("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=0,i=t.length,a=pt;for(n=0;n<i;n++)if(!((e=a.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,a=pt,o=0,c=[];for(e=0;e<i;e++)e%4==0&&e&&(c.push(o>>16&255),c.push(o>>8&255),c.push(255&o)),o=o<<6|a.indexOf(r.charAt(e));return 0===(n=i%4*6)?(c.push(o>>16&255),c.push(o>>8&255),c.push(255&o)):18===n?(c.push(o>>10&255),c.push(o>>2&255)):12===n&&c.push(o>>4&255),st?st.from?st.from(c):new st(c):c},predicate:function(t){return st&&st.isBuffer(t)},represent:function(t){var e,n,r="",i=0,a=t.length,o=pt;for(e=0;e<a;e++)e%3==0&&e&&(r+=o[i>>18&63],r+=o[i>>12&63],r+=o[i>>6&63],r+=o[63&i]),i=(i<<8)+t[e];return 0===(n=a%3)?(r+=o[i>>18&63],r+=o[i>>12&63],r+=o[i>>6&63],r+=o[63&i]):2===n?(r+=o[i>>10&63],r+=o[i>>4&63],r+=o[i<<2&63],r+=o[64]):1===n&&(r+=o[i>>2&63],r+=o[i<<4&63],r+=o[64],r+=o[64]),r}}),ht=Object.prototype.hasOwnProperty,gt=Object.prototype.toString;var mt=new Y("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,a,o=[],c=t;for(e=0,n=c.length;e<n;e+=1){if(r=c[e],a=!1,"[object Object]"!==gt.call(r))return!1;for(i in r)if(ht.call(r,i)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==o.indexOf(i))return!1;o.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),vt=Object.prototype.toString;var bt=new Y("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,a,o=t;for(a=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(r=o[e],"[object Object]"!==vt.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;a[e]=[i[0],r[i[0]]]}return!0},construct:function(t){if(null===t)return[];var e,n,r,i,a,o=t;for(a=new Array(o.length),e=0,n=o.length;e<n;e+=1)r=o[e],i=Object.keys(r),a[e]=[i[0],r[i[0]]];return a}}),yt=Object.prototype.hasOwnProperty;var wt=new K({include:[at],implicit:[ut,lt],explicit:[dt,mt,bt,new Y("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if(yt.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]});var xt=new Y("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}});var At,Ot=new Y("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,n=/\/([gim]*)$/.exec(t),r="";if("/"===e[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==e[e.length-r.length-1])return!1}return!0},construct:function(t){var e=t,n=/\/([gim]*)$/.exec(t),r="";return"/"===e[0]&&(n&&(r=n[1]),e=e.slice(1,e.length-r.length-1)),new RegExp(e,r)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{At=ft("esprima")}catch(t){"undefined"!=typeof window&&(At=window.esprima)}var kt=new Y("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",n=At.parse(e,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(t){return!1}},construct:function(t){var e,n="("+t+")",r=At.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"ArrowFunctionExpression"!==r.body[0].expression.type&&"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach((function(t){i.push(t.name)})),e=r.body[0].expression.body.range,"BlockStatement"===r.body[0].expression.body.type?new Function(i,n.slice(e[0]+1,e[1]-1)):new Function(i,"return "+n.slice(e[0],e[1]))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),Et=K.DEFAULT=new K({include:[wt],explicit:[xt,Ot,kt]}),Ct=Object.prototype.hasOwnProperty,jt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,St=/[\x85\u2028\u2029]/,Pt=/[,\[\]\{\}]/,It=/^(?:!|!!|![a-z\-]+!)$/i,Ft=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Tt(t){return Object.prototype.toString.call(t)}function _t(t){return 10===t||13===t}function Nt(t){return 9===t||32===t}function Lt(t){return 9===t||32===t||10===t||13===t}function Dt(t){return 44===t||91===t||93===t||123===t||125===t}function Rt(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function Mt(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"Â…":95===t?"Â ":76===t?"\u2028":80===t?"\u2029":""}function Ut(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var zt=new Array(256),Gt=new Array(256),qt=0;qt<256;qt++)zt[qt]=Mt(qt)?1:0,Gt[qt]=Mt(qt);function $t(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Et,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Wt(t,e){return new G(e,new $(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function Bt(t,e){throw Wt(t,e)}function Yt(t,e){t.onWarning&&t.onWarning.call(null,Wt(t,e))}var Ht={YAML:function(t,e,n){var r,i,a;null!==t.version&&Bt(t,"duplication of %YAML directive"),1!==n.length&&Bt(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Bt(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),a=parseInt(r[2],10),1!==i&&Bt(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=a<2,1!==a&&2!==a&&Yt(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&Bt(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],It.test(r)||Bt(t,"ill-formed tag handle (first argument) of the TAG directive"),Ct.call(t.tagMap,r)&&Bt(t,'there is a previously declared suffix for "'+r+'" tag handle'),Ft.test(i)||Bt(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[r]=i}};function Vt(t,e,n,r){var i,a,o,c;if(e<n){if(c=t.input.slice(e,n),r)for(i=0,a=c.length;i<a;i+=1)9===(o=c.charCodeAt(i))||32<=o&&o<=1114111||Bt(t,"expected valid JSON character");else jt.test(c)&&Bt(t,"the stream contains non-printable characters");t.result+=c}}function Kt(t,e,n,r){var i,a,o,c;for(U.isObject(n)||Bt(t,"cannot merge mappings; the provided source object is unacceptable"),o=0,c=(i=Object.keys(n)).length;o<c;o+=1)a=i[o],Ct.call(e,a)||(e[a]=n[a],r[a]=!0)}function Zt(t,e,n,r,i,a,o,c){var u,s;if(Array.isArray(i))for(u=0,s=(i=Array.prototype.slice.call(i)).length;u<s;u+=1)Array.isArray(i[u])&&Bt(t,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===Tt(i[u])&&(i[u]="[object Object]");if("object"==typeof i&&"[object Object]"===Tt(i)&&(i="[object Object]"),i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(a))for(u=0,s=a.length;u<s;u+=1)Kt(t,e,a[u],n);else Kt(t,e,a,n);else t.json||Ct.call(n,i)||!Ct.call(e,i)||(t.line=o||t.line,t.position=c||t.position,Bt(t,"duplicated mapping key")),e[i]=a,delete n[i];return e}function Jt(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Bt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function Qt(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;Nt(i);)i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!_t(i))break;for(Jt(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&Yt(t,"deficient indentation"),r}function Xt(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,0!==(e=t.input.charCodeAt(n))&&!Lt(e)))}function te(t,e){1===e?t.result+=" ":e>1&&(t.result+=U.repeat("\n",e-1))}function ee(t,e){var n,r,i=t.tag,a=t.anchor,o=[],c=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=o),r=t.input.charCodeAt(t.position);0!==r&&45===r&&Lt(t.input.charCodeAt(t.position+1));)if(c=!0,t.position++,Qt(t,!0,-1)&&t.lineIndent<=e)o.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,ie(t,e,3,!1,!0),o.push(t.result),Qt(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)Bt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!c&&(t.tag=i,t.anchor=a,t.kind="sequence",t.result=o,!0)}function ne(t){var e,n,r,i,a=!1,o=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&Bt(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(a=!0,i=t.input.charCodeAt(++t.position)):33===i?(o=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,a){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):Bt(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!Lt(i);)33===i&&(o?Bt(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),It.test(n)||Bt(t,"named tag handle cannot contain such characters"),o=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),Pt.test(r)&&Bt(t,"tag suffix cannot contain flow indicator characters")}return r&&!Ft.test(r)&&Bt(t,"tag name cannot contain such characters: "+r),a?t.tag=r:Ct.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:Bt(t,'undeclared tag handle "'+n+'"'),!0}function re(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&Bt(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!Lt(n)&&!Dt(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Bt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function ie(t,e,n,r,i){var a,o,c,u,s,l,f,p,d=1,h=!1,g=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=o=c=4===n||3===n,r&&Qt(t,!0,-1)&&(h=!0,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)),1===d)for(;ne(t)||re(t);)Qt(t,!0,-1)?(h=!0,c=a,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)):c=!1;if(c&&(c=h||i),1!==d&&4!==n||(f=1===n||2===n?e:e+1,p=t.position-t.lineStart,1===d?c&&(ee(t,p)||function(t,e,n){var r,i,a,o,c,u=t.tag,s=t.anchor,l={},f={},p=null,d=null,h=null,g=!1,m=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=l),c=t.input.charCodeAt(t.position);0!==c;){if(r=t.input.charCodeAt(t.position+1),a=t.line,o=t.position,63!==c&&58!==c||!Lt(r)){if(!ie(t,n,2,!1,!0))break;if(t.line===a){for(c=t.input.charCodeAt(t.position);Nt(c);)c=t.input.charCodeAt(++t.position);if(58===c)Lt(c=t.input.charCodeAt(++t.position))||Bt(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Zt(t,l,f,p,d,null),p=d=h=null),m=!0,g=!1,i=!1,p=t.tag,d=t.result;else{if(!m)return t.tag=u,t.anchor=s,!0;Bt(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!m)return t.tag=u,t.anchor=s,!0;Bt(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(g&&(Zt(t,l,f,p,d,null),p=d=h=null),m=!0,g=!0,i=!0):g?(g=!1,i=!0):Bt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=r;if((t.line===a||t.lineIndent>e)&&(ie(t,e,4,!0,i)&&(g?d=t.result:h=t.result),g||(Zt(t,l,f,p,d,h,a,o),p=d=h=null),Qt(t,!0,-1),c=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==c)Bt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&Zt(t,l,f,p,d,null),m&&(t.tag=u,t.anchor=s,t.kind="mapping",t.result=l),m}(t,p,f))||function(t,e){var n,r,i,a,o,c,u,s,l,f,p=!0,d=t.tag,h=t.anchor,g={};if(91===(f=t.input.charCodeAt(t.position)))i=93,c=!1,r=[];else{if(123!==f)return!1;i=125,c=!0,r={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),f=t.input.charCodeAt(++t.position);0!==f;){if(Qt(t,!0,e),(f=t.input.charCodeAt(t.position))===i)return t.position++,t.tag=d,t.anchor=h,t.kind=c?"mapping":"sequence",t.result=r,!0;p||Bt(t,"missed comma between flow collection entries"),l=null,a=o=!1,63===f&&Lt(t.input.charCodeAt(t.position+1))&&(a=o=!0,t.position++,Qt(t,!0,e)),n=t.line,ie(t,e,1,!1,!0),s=t.tag,u=t.result,Qt(t,!0,e),f=t.input.charCodeAt(t.position),!o&&t.line!==n||58!==f||(a=!0,f=t.input.charCodeAt(++t.position),Qt(t,!0,e),ie(t,e,1,!1,!0),l=t.result),c?Zt(t,r,g,s,u,l):a?r.push(Zt(t,null,g,s,u,l)):r.push(u),Qt(t,!0,e),44===(f=t.input.charCodeAt(t.position))?(p=!0,f=t.input.charCodeAt(++t.position)):p=!1}Bt(t,"unexpected end of the stream within a flow collection")}(t,f)?g=!0:(o&&function(t,e){var n,r,i,a,o,c=1,u=!1,s=!1,l=e,f=0,p=!1;if(124===(a=t.input.charCodeAt(t.position)))r=!1;else{if(62!==a)return!1;r=!0}for(t.kind="scalar",t.result="";0!==a;)if(43===(a=t.input.charCodeAt(++t.position))||45===a)1===c?c=43===a?3:2:Bt(t,"repeat of a chomping mode identifier");else{if(!((i=48<=(o=a)&&o<=57?o-48:-1)>=0))break;0===i?Bt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Bt(t,"repeat of an indentation width identifier"):(l=e+i-1,s=!0)}if(Nt(a)){do{a=t.input.charCodeAt(++t.position)}while(Nt(a));if(35===a)do{a=t.input.charCodeAt(++t.position)}while(!_t(a)&&0!==a)}for(;0!==a;){for(Jt(t),t.lineIndent=0,a=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&32===a;)t.lineIndent++,a=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),_t(a))f++;else{if(t.lineIndent<l){3===c?t.result+=U.repeat("\n",u?1+f:f):1===c&&u&&(t.result+="\n");break}for(r?Nt(a)?(p=!0,t.result+=U.repeat("\n",u?1+f:f)):p?(p=!1,t.result+=U.repeat("\n",f+1)):0===f?u&&(t.result+=" "):t.result+=U.repeat("\n",f):t.result+=U.repeat("\n",u?1+f:f),u=!0,s=!0,f=0,n=t.position;!_t(a)&&0!==a;)a=t.input.charCodeAt(++t.position);Vt(t,n,t.position,!1)}}return!0}(t,f)||function(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(Vt(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=t.position,t.position++,i=t.position}else _t(n)?(Vt(t,r,i,!0),te(t,Qt(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Xt(t)?Bt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Bt(t,"unexpected end of the stream within a single quoted scalar")}(t,f)||function(t,e){var n,r,i,a,o,c,u;if(34!==(c=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(c=t.input.charCodeAt(t.position));){if(34===c)return Vt(t,n,t.position,!0),t.position++,!0;if(92===c){if(Vt(t,n,t.position,!0),_t(c=t.input.charCodeAt(++t.position)))Qt(t,!1,e);else if(c<256&&zt[c])t.result+=Gt[c],t.position++;else if((o=120===(u=c)?2:117===u?4:85===u?8:0)>0){for(i=o,a=0;i>0;i--)(o=Rt(c=t.input.charCodeAt(++t.position)))>=0?a=(a<<4)+o:Bt(t,"expected hexadecimal character");t.result+=Ut(a),t.position++}else Bt(t,"unknown escape sequence");n=r=t.position}else _t(c)?(Vt(t,n,r,!0),te(t,Qt(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Xt(t)?Bt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Bt(t,"unexpected end of the stream within a double quoted scalar")}(t,f)?g=!0:!function(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!Lt(r)&&!Dt(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Bt(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(n)||Bt(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Qt(t,!0,-1),!0}(t)?function(t,e,n){var r,i,a,o,c,u,s,l,f=t.kind,p=t.result;if(Lt(l=t.input.charCodeAt(t.position))||Dt(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(Lt(r=t.input.charCodeAt(t.position+1))||n&&Dt(r)))return!1;for(t.kind="scalar",t.result="",i=a=t.position,o=!1;0!==l;){if(58===l){if(Lt(r=t.input.charCodeAt(t.position+1))||n&&Dt(r))break}else if(35===l){if(Lt(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Xt(t)||n&&Dt(l))break;if(_t(l)){if(c=t.line,u=t.lineStart,s=t.lineIndent,Qt(t,!1,-1),t.lineIndent>=e){o=!0,l=t.input.charCodeAt(t.position);continue}t.position=a,t.line=c,t.lineStart=u,t.lineIndent=s;break}}o&&(Vt(t,i,a,!1),te(t,t.line-c),i=a=t.position,o=!1),Nt(l)||(a=t.position+1),l=t.input.charCodeAt(++t.position)}return Vt(t,i,a,!1),!!t.result||(t.kind=f,t.result=p,!1)}(t,f,1===n)&&(g=!0,null===t.tag&&(t.tag="?")):(g=!0,null===t.tag&&null===t.anchor||Bt(t,"alias node should not have any properties")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===d&&(g=c&&ee(t,p))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(u=0,s=t.implicitTypes.length;u<s;u+=1)if((l=t.implicitTypes[u]).resolve(t.result)){t.result=l.construct(t.result),t.tag=l.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else Ct.call(t.typeMap[t.kind||"fallback"],t.tag)?(l=t.typeMap[t.kind||"fallback"][t.tag],null!==t.result&&l.kind!==t.kind&&Bt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+l.kind+'", not "'+t.kind+'"'),l.resolve(t.result)?(t.result=l.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Bt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):Bt(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||g}function ae(t){var e,n,r,i,a=t.position,o=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(i=t.input.charCodeAt(t.position))&&(Qt(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(o=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Lt(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&Bt(t,"directive name must not be less than one character in length");0!==i;){for(;Nt(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!_t(i));break}if(_t(i))break;for(e=t.position;0!==i&&!Lt(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&Jt(t),Ct.call(Ht,n)?Ht[n](t,n,r):Yt(t,'unknown document directive "'+n+'"')}Qt(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Qt(t,!0,-1)):o&&Bt(t,"directives end mark is expected"),ie(t,t.lineIndent-1,4,!1,!0),Qt(t,!0,-1),t.checkLineBreaks&&St.test(t.input.slice(a,t.position))&&Yt(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Xt(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Qt(t,!0,-1)):t.position<t.length-1&&Bt(t,"end of the stream or a document separator is expected")}function oe(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new $t(t,e);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)ae(n);return n.documents}function ce(t,e,n){var r,i,a=oe(t,n);if("function"!=typeof e)return a;for(r=0,i=a.length;r<i;r+=1)e(a[r])}function ue(t,e){var n=oe(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new G("expected a single document in the stream, but found more")}}var se={loadAll:ce,load:ue,safeLoadAll:function(t,e,n){if("function"!=typeof e)return ce(t,U.extend({schema:wt},n));ce(t,e,U.extend({schema:wt},n))},safeLoad:function(t,e){return ue(t,U.extend({schema:wt},e))}},le=Object.prototype.toString,fe=Object.prototype.hasOwnProperty,pe={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},de=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function he(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else{if(!(t<=4294967295))throw new G("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+U.repeat("0",r-e.length)+e}function ge(t){this.schema=t.schema||Et,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=U.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var n,r,i,a,o,c,u;if(null===e)return{};for(n={},i=0,a=(r=Object.keys(e)).length;i<a;i+=1)o=r[i],c=String(e[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(u=t.compiledTypeMap.fallback[o])&&fe.call(u.styleAliases,c)&&(c=u.styleAliases[c]),n[o]=c;return n}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function me(t,e){for(var n,r=U.repeat(" ",e),i=0,a=-1,o="",c=t.length;i<c;)-1===(a=t.indexOf("\n",i))?(n=t.slice(i),i=c):(n=t.slice(i,a+1),i=a+1),n.length&&"\n"!==n&&(o+=r),o+=n;return o}function ve(t,e){return"\n"+U.repeat(" ",t.indent*e)}function be(t){return 32===t||9===t}function ye(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&65279!==t||65536<=t&&t<=1114111}function we(t){return ye(t)&&65279!==t&&44!==t&&91!==t&&93!==t&&123!==t&&125!==t&&58!==t&&35!==t}function xe(t){return/^\n* /.test(t)}function Ae(t,e,n,r,i){var a,o,c,u=!1,s=!1,l=-1!==r,f=-1,p=ye(c=t.charCodeAt(0))&&65279!==c&&!be(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&!be(t.charCodeAt(t.length-1));if(e)for(a=0;a<t.length;a++){if(!ye(o=t.charCodeAt(a)))return 5;p=p&&we(o)}else{for(a=0;a<t.length;a++){if(10===(o=t.charCodeAt(a)))u=!0,l&&(s=s||a-f-1>r&&" "!==t[f+1],f=a);else if(!ye(o))return 5;p=p&&we(o)}s=s||l&&a-f-1>r&&" "!==t[f+1]}return u||s?n>9&&xe(t)?5:s?4:3:p&&!i(t)?1:2}function Oe(t,e,n,r){t.dump=function(){if(0===e.length)return"''";if(!t.noCompatMode&&-1!==de.indexOf(e))return"'"+e+"'";var i=t.indent*Math.max(1,n),a=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),o=r||t.flowLevel>-1&&n>=t.flowLevel;switch(Ae(e,o,t.indent,a,(function(e){return function(t,e){var n,r;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(t.implicitTypes[n].resolve(e))return!0;return!1}(t,e)}))){case 1:return e;case 2:return"'"+e.replace(/'/g,"''")+"'";case 3:return"|"+ke(e,t.indent)+Ee(me(e,i));case 4:return">"+ke(e,t.indent)+Ee(me(function(t,e){var n,r,i=/(\n+)([^\n]*)/g,a=(c=t.indexOf("\n"),c=-1!==c?c:t.length,i.lastIndex=c,Ce(t.slice(0,c),e)),o="\n"===t[0]||" "===t[0];var c;for(;r=i.exec(t);){var u=r[1],s=r[2];n=" "===s[0],a+=u+(o||n||""===s?"":"\n")+Ce(s,e),o=n}return a}(e,a),i));case 5:return'"'+function(t){for(var e,n,r,i="",a=0;a<t.length;a++)(e=t.charCodeAt(a))>=55296&&e<=56319&&(n=t.charCodeAt(a+1))>=56320&&n<=57343?(i+=he(1024*(e-55296)+n-56320+65536),a++):i+=!(r=pe[e])&&ye(e)?t[a]:r||he(e);return i}(e)+'"';default:throw new G("impossible error: invalid scalar style")}}()}function ke(t,e){var n=xe(t)?String(e):"",r="\n"===t[t.length-1];return n+(r&&("\n"===t[t.length-2]||"\n"===t)?"+":r?"":"-")+"\n"}function Ee(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function Ce(t,e){if(""===t||" "===t[0])return t;for(var n,r,i=/ [^ ]/g,a=0,o=0,c=0,u="";n=i.exec(t);)(c=n.index)-a>e&&(r=o>a?o:c,u+="\n"+t.slice(a,r),a=r+1),o=c;return u+="\n",t.length-a>e&&o>a?u+=t.slice(a,o)+"\n"+t.slice(o+1):u+=t.slice(a),u.slice(1)}function je(t,e,n){var r,i,a,o,c,u;for(a=0,o=(i=n?t.explicitTypes:t.implicitTypes).length;a<o;a+=1)if(((c=i[a]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof e&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(t.tag=n?c.tag:"?",c.represent){if(u=t.styleMap[c.tag]||c.defaultStyle,"[object Function]"===le.call(c.represent))r=c.represent(e,u);else{if(!fe.call(c.represent,u))throw new G("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');r=c.represent[u](e,u)}t.dump=r}return!0}return!1}function Se(t,e,n,r,i,a){t.tag=null,t.dump=n,je(t,n,!1)||je(t,n,!0);var o=le.call(t.dump);r&&(r=t.flowLevel<0||t.flowLevel>e);var c,u,s="[object Object]"===o||"[object Array]"===o;if(s&&(u=-1!==(c=t.duplicates.indexOf(n))),(null!==t.tag&&"?"!==t.tag||u||2!==t.indent&&e>0)&&(i=!1),u&&t.usedDuplicates[c])t.dump="*ref_"+c;else{if(s&&u&&!t.usedDuplicates[c]&&(t.usedDuplicates[c]=!0),"[object Object]"===o)r&&0!==Object.keys(t.dump).length?(!function(t,e,n,r){var i,a,o,c,u,s,l="",f=t.tag,p=Object.keys(n);if(!0===t.sortKeys)p.sort();else if("function"==typeof t.sortKeys)p.sort(t.sortKeys);else if(t.sortKeys)throw new G("sortKeys must be a boolean or a function");for(i=0,a=p.length;i<a;i+=1)s="",r&&0===i||(s+=ve(t,e)),c=n[o=p[i]],Se(t,e+1,o,!0,!0,!0)&&((u=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&10===t.dump.charCodeAt(0)?s+="?":s+="? "),s+=t.dump,u&&(s+=ve(t,e)),Se(t,e+1,c,!0,u)&&(t.dump&&10===t.dump.charCodeAt(0)?s+=":":s+=": ",l+=s+=t.dump));t.tag=f,t.dump=l||"{}"}(t,e,t.dump,i),u&&(t.dump="&ref_"+c+t.dump)):(!function(t,e,n){var r,i,a,o,c,u="",s=t.tag,l=Object.keys(n);for(r=0,i=l.length;r<i;r+=1)c=t.condenseFlow?'"':"",0!==r&&(c+=", "),o=n[a=l[r]],Se(t,e,a,!1,!1)&&(t.dump.length>1024&&(c+="? "),c+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Se(t,e,o,!1,!1)&&(u+=c+=t.dump));t.tag=s,t.dump="{"+u+"}"}(t,e,t.dump),u&&(t.dump="&ref_"+c+" "+t.dump));else if("[object Array]"===o){var l=t.noArrayIndent&&e>0?e-1:e;r&&0!==t.dump.length?(!function(t,e,n,r){var i,a,o="",c=t.tag;for(i=0,a=n.length;i<a;i+=1)Se(t,e+1,n[i],!0,!0)&&(r&&0===i||(o+=ve(t,e)),t.dump&&10===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=c,t.dump=o||"[]"}(t,l,t.dump,i),u&&(t.dump="&ref_"+c+t.dump)):(!function(t,e,n){var r,i,a="",o=t.tag;for(r=0,i=n.length;r<i;r+=1)Se(t,e,n[r],!1,!1)&&(0!==r&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=o,t.dump="["+a+"]"}(t,l,t.dump),u&&(t.dump="&ref_"+c+" "+t.dump))}else{if("[object String]"!==o){if(t.skipInvalid)return!1;throw new G("unacceptable kind of an object to dump "+o)}"?"!==t.tag&&Oe(t,t.dump,e,a)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return!0}function Pe(t,e){var n,r,i=[],a=[];for(Ie(t,i,a),n=0,r=a.length;n<r;n+=1)e.duplicates.push(i[a[n]]);e.usedDuplicates=new Array(r)}function Ie(t,e,n){var r,i,a;if(null!==t&&"object"==typeof t)if(-1!==(i=e.indexOf(t)))-1===n.indexOf(i)&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,a=t.length;i<a;i+=1)Ie(t[i],e,n);else for(i=0,a=(r=Object.keys(t)).length;i<a;i+=1)Ie(t[r[i]],e,n)}function Fe(t,e){var n=new ge(e=e||{});return n.noRefs||Pe(t,n),Se(n,0,t,!0,!0)?n.dump+"\n":""}var Te={dump:Fe,safeDump:function(t,e){return Fe(t,U.extend({schema:wt},e))}};function _e(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var Ne={Type:Y,Schema:K,FAILSAFE_SCHEMA:Z,JSON_SCHEMA:it,CORE_SCHEMA:at,DEFAULT_SAFE_SCHEMA:wt,DEFAULT_FULL_SCHEMA:Et,load:se.load,loadAll:se.loadAll,safeLoad:se.safeLoad,safeLoadAll:se.safeLoadAll,dump:Te.dump,safeDump:Te.safeDump,YAMLException:G,MINIMAL_SCHEMA:Z,SAFE_SCHEMA:wt,DEFAULT_SCHEMA:Et,scan:_e("scan"),parse:_e("parse"),compose:_e("compose"),addConstructor:_e("addConstructor")},Le=function(t){var e=function(t,e,n){return a(t[e])?n:t[e]},n=t.map((function(t){var n={name:e(t,"name",v(t.path)),description:e(t,"description",""),type:e(t,"type","files")};return n.metadata=function(t,e){var n={};return Object.assign(n,t),e.forEach((function(t){n.hasOwnProperty(t)&&delete n[t]})),n}(t,["name","description","type"]),n}));return F(n,{name:"character",description:"character",type:"character"})},De=function(t,e){return function(t,e){try{return t()}catch(t){return e(t)}}(t,(function(){return null}))},Re=function(t){return k(N(t),"data.txt")},Me=function(t){var e=We(t);return L((function(){return Be(e)}),(function(){var e=Re(t);if(j(e)){var n=b(e).join("\n");return Ne.safeLoad(n)}return[]}))},Ue=function(t,e){var n=We(e);return L((function(){return Be(n)}),(function(){var n=Ne.safeDump(t);y(Re(e),n.split("\n"))}))},ze=function(t,e){var n=k(N(t),e);return w.exists(n)||w.create(n,{recursive:!0}),n},Ge=function(t,e,n){void 0===n&&(n={});var r=We(e);return L((function(){return Be(r)}),(function(){var r=Me(e);t=$e(t,r);var i=ze(e,t);null===r&&(r=[]);var a=r.map((function(t){return t.name})),o=0;for(var c in a.includes(t)?o=a.findIndex((function(e){return e===t})):r[o=r.length]={},r[o].name=t,n)Array.isArray(n[c])&&!n[c].length||void 0===n[c]?delete r[o][c]:r[o][c]=n[c];return Ue(r,e),i}))},qe=function(t,e){var n=We(e);return L((function(){return Be(n)}),(function(){var n=Me(e);t=$e(t,n);var r=n.map((function(t){return t.name}));if(!r.includes(t))throw D("Pin not found, pins available in registry: "+r.join(", ")),new Error("Pin '"+t+"' not found in '"+e.name+"' board.");return n.find((function(e){return e.name===t}))}))},$e=function(t,e){var n=e.map((function(t){return t.name})),r="";r=/\//g.test(t)?paste0("^",t,"$"):".*/"+t+"$";var i=n.filter((function(t){return new RegExp(r,"gi").test(t)}));return 1==i.length&&(t=i),t},We=function(t){return function(t,e){return r.get("fileExists")(t)}(Re(t)+".lock",o("pins.lock.timeout",1/0))},Be=function(t){return function(t){return r.get("fileExists")(t)}(t)},Ye=function(t,e){return t=E(t,{winslash:"/",mustWork:!1}),e=E(e,{winslash:"/",mustWork:!1}),t.startsWith(e)&&(t=t.substr(e.length+1,t.length)),t.replace("^/","")},He=function(t,e){var n=N(e);return t.startsWith(n)?t:E(k(n,t),{mustWork:!1})},Ve=function(t,e){var n=e.replace(/^https?:\/\//g,""),r=De((function(){return qe(n,t)||null}));a(r)||(r.cache={},Ge(n,t,{params:r}))},Ke=function(t){var e={},n=k(t,"data.txt");if(j(n)){var r=b(n).join("\n");e=Ne.safeLoad(r)}return a(e.type)&&(e.type="files"),e},Ze=function(t,e,n){var r=Object.assign({path:n},e);!function(t){for(var e in t)a(t[e])&&delete t[e]}(r);var i=Ne.safeDump(r);return y(k(t,"data.txt"),i.split("\n")),r},Je=function(t,e){return a(e.path)||a(t.path)||/https?:\/\//g.test(t.path)||(t.path=k(t.path,e.path)),t=Object.assign(t,e)},Qe=function(){return o("pins.versions.path","_versions")},Xe=function(t){var e=w.list(t,{fullNames:!0});e=e.filter((function(t){return!/(\/|\\)_versions$/g.test(t)}));var n=k(Qe(),function(t){var e=t.map((function(t){return I(t)}));return e.length>1?(e=e.join(","),e=I(e)):e[0]}(e));return E(k(E(t),n),{mustWork:!1})},tn=function(t,e,n){var r=null;if(function(t,e){return void 0===e&&(e={defaultValue:!1}),e.defaultValue?!1!==t.versions:!0===t.versions}(t)){var i=ze(t,e),a=(r=Ke(i).versions||[],Xe(n)),o=Ye(a,n);r.some((function(t){return t===o}))&&(r=r.filter((function(t){return t!==o}))),w.exists(a)&&w.remove(a,{recursive:!0}),w.create(a,{recursive:!0});var c=w.list(n,{fullNames:!0}).filter((function(t){return t!=k(n,Qe())}));S(c,a,{recursive:!0}),r=[o].concat(r);var u=Ke(n);u.versions=r,function(t,e){var n=k(t,"data.txt"),r=Ne.safeDump(e);y(n,r.split("\n"))}(n,u)}return r},en=function(t,e){var n=F(null,{versions:"character"}),r=ze(t,e);return(n=Ke(r).versions).length>0&&(n={version:n}),n},nn=function(t){t.map((function(t){return t.replace("[^/\\\\]+$","")})).filter((function(t,e,n){return n.indexOf(t)===e})).length>0&&(t=t.map((function(t){return t.replace(/.*(\/|\\)/g,"")})));var e=t.map((function(t){return t.substr(0,7)}));return e.filter((function(t,e,n){return n.indexOf(t)===e})).length==t.length&&(t=e),t},rn=function(t,e){var n=nn(t).indexOf(e);if(-1===n)throw new Error("Version '"+e+"' is not valid, please select from pin_versions().");return t[n]};function an(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}var on={},cn="default",un=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];R("useMethod",Object.assign.apply(Object,[{object:e}].concat(n))),on[t]=on[t]||{};var i=(e&&e.class?e.class:e.constructor&&e.constructor.name?e.constructor.name:cn).toLowerCase();return T(e)&&(i="dataframe"),void 0!==e._content&&(e=e._content),{className:i,object:e}},sn=function(t,e,n){return on[t]=on[t]||{},on[t][e]=n,n},ln=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new Promise((function(r,i){var a,o,c,u,s;return u=(c=un.apply(void 0,[t,e].concat(n))).className,e=c.object,on[t]&&on[t][u]?(s=(a=on[t])[u].apply(a,[e].concat(n)))&&s.then?s.then(r,i):r(s):on[t]&&on[t].default?r((o=on[t]).default.apply(o,[e].concat(n))):i(new Error("no applicable method for '"+t+"' applied to an object of class '"+u+"'"))}))},fn=function(t,e){for(var n,r,i=[],a=arguments.length-2;a-- >0;)i[a]=arguments[a+2];var o=un.apply(void 0,[t,e].concat(i)),c=o.className;if(e=o.object,on[t]&&on[t][c])return(n=on[t])[c].apply(n,[e].concat(i));if(on[t]&&on[t].default)return(r=on[t]).default.apply(r,[e].concat(i));throw new Error("no applicable method for '"+t+"' applied to an object of class '"+c+"'")};var pn=function(t,e,n,r){for(var i=[],a=arguments.length-4;a-- >0;)i[a]=arguments[a+4];return fn.apply(void 0,["boardPinCreate",t,e,n,r].concat(i))},dn=function(t,e){var n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(e,[]);return new Promise((function(e,r){return ln.apply(void 0,["boardInitialize",t].concat(n)).then(e,r)}))},hn=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new Promise((function(r,i){return r(ln.apply(void 0,["boardPinGet",t,e].concat(n)))}))};var gn=function(t,e){var n=e.name,r=e.board,i=e.registerCall,a=e.connect,o={name:n,board:null==r?n:r,connect:null==a?"packages"!==n:a,url:e.url,registerCall:i};return/^http:\/\/|^https:\/\//g.test(t)&&(o.url=t,o.board="datatxt",null!=n&&t!==n||(o.name=o.url.replace(/https?:\/\//g,"").replace(/\..*$/g,"")),o.registerCall='pins::board_register(board = "datatxt", name = "'+o.name+'", url = "'+o.url+'")'),null==o.name&&(o.name=t),null==o.board&&(o.board=t),o},mn=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];t=yn(t);return f(t,e),t},vn=function(t,e){var r=yn(t);return function(t){n("uiViewerClose")(t)}(r),r},bn=function(){R("boardList",{});var t=c(["local"],_()),e=c(h(),t);return e.filter((function(t,e,n){return n.indexOf(t)===e}))},yn=function(t){a(t)&&(t=_());var e='pins::board_register(board = "'+t+'")';if(!h().includes(t)){var n=gn(t,{});null!==n.registerCall&&(e=n.registerCall),t=n.name;try{wn(n.board,{name:n.name,connect:n.connect,registerCall:e,url:n.url})}catch(e){D("Failed to register board "+t+": "+e.toString())}if(!h().includes(t))throw"Board '"+t+"' not a board, available boards: "+bn().join(", ")}return function(t){return d[t]}(t)},wn=function(t,e){var n=e.name,i=e.cache,a=e.versions,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(e,["name","cache","versions"]);return new Promise((function(e,c){var u;return null==n&&(n=t),null==i&&(i=g()),u=gn(t,{board:t,name:n,registerCall:o.registerCall,connect:o.connect,url:o.url}),o.url=u.url,function(t,e,n,r){for(var i=[],a=arguments.length-4;a-- >0;)i[a]=arguments[a+4];return new Promise((function(a,o){return null==n?o(new Error("Please specify the 'cache' parameter.")):dn(t={board:t,name:e,cache:n,versions:r,class:t},Object.assign.apply(Object,[{cache:n,versions:r}].concat(i))).then((function(e){try{return a(t=e)}catch(t){return o(t)}}),o)}))}(u.board,u.name,i,a,o).then((function(n){try{return t=n,function(t,e){d[t]=e}(u.name,t),null==u.registerCall&&(u.registerCall=function(t,e){return r.get("boardRegisterCode")(t,e)}(t.name,u.name)),!1!==u.connect&&mn(t.name,u.registerCall),e(u.name)}catch(t){return c(t)}}),c)}))};function xn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}var An=function(t,e){var n=e.board,r=e.cache,i=e.extract,o=e.version,c=e.files,s=e.signature,f=xn(e,["board","cache","extract","version","files","signature"]);return new Promise((function(e,p){var d,h,g,m;return a(n)?(d=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new Promise((function(e,n){var r=function(t){try{return e(null)}catch(t){return n(t)}};try{return hn.apply(void 0,t).then(e,r)}catch(t){r()}}))})(yn(null),t,{version:o}).then(function(e){try{if(a(h=e)&&a(n)){var c,u,s,l=[];for(c in bn())l.push(c);function f(){return l.length?(u=l.shift(),r||Ve(u,t),d(yn(u),t,{extract:i,version:o}).then((function(e){try{return a(h=e)?f:(D("Found pin "+t+" in board "+u),[1])}catch(t){return p(t)}}),p)):[1]}return(s=function(t){for(;t;){if(t.then)return void t.then(s,p);try{if(t.pop){if(t.length)return t.pop()?g.call(this):t;t=f}else t=t.call(this)}catch(t){return p(t)}}}.bind(this))(f);function g(){return m.call(this)}}function m(){return a(h)?p(new Error("Failed to retrieve '"+t+"' pin.")):v.call(this)}return m.call(this)}catch(t){return p(t)}}.bind(this),p):(r||Ve(n,t),hn(yn(n),t,Object.assign.apply(Object,[{extract:i,version:o}].concat(f))).then(function(t){try{return h=t,v.call(this)}catch(t){return p(t)}}.bind(this),p));function v(){return g=Ke(h),a(g.type)&&(g.type="files"),m=u(h).filter((function(t){return!new RegExp("^"+Qe()).test(t)})),m=w.list(m,{fullNames:!0}),"files"==g.type&&m.length>1&&(m=m.filter((function(t){return!/\/data\.txt$/g.test(t)}))),a(s)||(pinVersionSignature(m),s===pin_signature)?e(c?l(m):kn({_content:h,class:g.type})):p(new Error("Pin signature '"+pin_signature+"' does not match given signature."))}}))},On=function(t,e){var n=e.board,r=e.name,i=e.extended,o=e.metadata,c=xn(e,["board","name","extended","metadata"]);return new Promise((function(e,s){var l,f,p,d,h;(a(n)||0==n.length)&&(n=bn()),t="string"==typeof(h=t)?function(t){void 0===t&&(t="");var e=t.split("/"),n=e[0];return e.pop(),{name:n,owner:e.join("/")}}(h).name:h,a(t)&&!a(r)&&(t=r),l=F(null,{name:"character",description:"character",type:"character",metadata:"character",board:"character"}),n=u(n);var g,m,v,b=[];for(g in n)b.push(g);function y(){if(!b.length)return[1];m=b.shift(),f=n[m],p=yn(f),d=null;var e=function(){try{return!0===i&&(d=d.map((function(t){return t.hasOwnProperty("metadata")&&(Object.assign(t,t.metadata),delete t.metadata),t}))),d.length>0&&(r=d,a=F(d.map((function(t){return Object.assign(t,{board:f})})),{board:"character"}),o=r.map((function(t,e){var n={};return Object.assign(n,t),Object.assign(n,a[e]),n})),c=Object.assign({},r.columns),Object.assign(c,a.columns),d=F(o,c),e=d,(n=[].concat(t=l).concat(e)).columns={},Object.assign(n.columns,t.columns),Object.assign(n.columns,e.columns),l=n),y}catch(t){return s(t)}var t,e,n,r,a,o,c},a=function(t){try{return D("Error searching '"+f+"' board: "+t),d=F(null,{name:"character",description:"character",rows:"numeric",cols:"numeric",class:"numeric"}),e()}catch(t){return s(t)}};try{return function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return new Promise((function(r,i){return r(ln.apply(void 0,["boardPinFind",t,e].concat(n)))}))}(p,t,Object.assign.apply(Object,[{name:r,extended:i}].concat(c))).then((function(t){try{return d=t,e()}catch(t){return a(t)}}),a)}catch(t){a(t)}}return(v=function(t){for(;t;){if(t.then)return void t.then(v,s);try{if(t.pop){if(t.length)return t.pop()?w.call(this):t;t=y}else t=t.call(this)}catch(t){return s(t)}}}.bind(this))(y);function w(){return a(t)||(l=l.filter((function(e){return e.name===t||!a(e.description)&&new RegExp(t,"i").test(e.description)}))),o||(l=function(t,e){var n={};Object.assign(n,t.columns),Object.keys(n).includes(e)&&delete n[e];var r=t.map((function(t){var n={};return Object.assign(n,t),Object.keys(n).includes(e)&&delete n[e],n}));return F(r,n)}(l,"metadata")),a(r)||(l=l.filter((function(t){return new RegExp("(.*/)?"+r+"$").test(t.name)}))).length&&(l=l.filter((function(t,e){return 0===e}))),l=l.sort((function(t,e){return t.name<e.name})),e(l)}}))},kn=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return fn.apply(void 0,["pinLoad",t].concat(e))},En=Object.freeze({kaggle:"kaggle"}),Cn=function(t,e){var n=v(t),r=new Error("Can't auto-generate pin name from object, please specify the 'name' parameter.");if(!n)throw r;var i=n.replace(/[^a-zA-Z0-9-]/g,"-").replace(/^-*|-*$/g,"").replace(/-+/g,"-");if(!i)throw r;return e===En.kaggle&&i.length<5?i+"-pin":i},jn=function(t,e){var n,r=["rows","cols","name","description"];return(n=e,a(n)?[]:Object.keys(n)).forEach((function(n){if("columns"===n){var i=["name","type"];Array.isArray(t.columns)&&(t.columns=t.columns.map((function(e,n){return{name:Object.keys(t.columns)[n],type:t.columns[n]}}))),e.columns.forEach((function(e){var n=metadata$columns.filter((function(n,r){return t.columns[r].name===e.name}));1==n.length&&Object.keys(e).forEach((function(r){i.includes(r)||(t.columns[n][r]=e[r])}))}))}else r.includes(n)||(t[n]=e[n])})),t};var Sn=function(t,e){var n=Object.assign({retrieve:!0},e),c=n.path,s=n.description,l=n.type,f=n.metadata,d=n.extract,h=n.retrieve,g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(n,["path","description","type","metadata","extract","retrieve"]);c=u(c);var b=g.customMetadata,y=g.zip;a(d)&&(d=!0);var x=yn(t),A=e.name||function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=[],i=0;i>t.length;i++)r.push(fun.apply(void 0,[t[i]].concat(e)));return r}(pinPath);D("Storing "+A+" into board "+x.name+" with type "+l),g.cache||Ve(x,A),c=c.filter((function(t){return!/data\.txt/g.test(t)}));var O=m();return w.create(O),L((function(){return unlink(O,{recursive:!0})}),(function(){1==c.length&&/^http/g.test(c)&&!/\\.[a-z]{2,4}$/g.test(c)&&o("pins.search.datatxt",!0)&&(datatxtPath=k(c,"data.txt"),localPath=pinDownload(datatxtPath,A,_(),{canFail:!0}),is.null(local_path)||(manifest=Ke(localPath),c=c+"/"+manifest[c],d=!1));var t=!1;if(!0===y){var e=function(t){var n=t[0];return function(t,e){for(i in t)if(!e(i))return!1;return!0}(t,(function(t){return startsWith(t)}))||n===C(n)?n:e(C(n[0]))},n=e(c);w.zip(n.map((function(t){return t.replace(common_path+"/","")})),k(O,"data.zip"),n),t=!0}else for(var u=0;u<c.length;u++){var m={somethingChanged:!0},E=c[u];if(/^http/g.test(E)&&(E=pin_download(E,A,_(),Object.assign({extract:d,details:m,canFail:!0},opt)),!a(m.error))){try{An(A,{board:_()})}catch(t){}if(a(null))throw new Error(m.error);return D(m.error),null}if(m.somethingChanged){var I=function(t,e){j(t)&&P(t)>=o("pins.link.size",2)?(k(e,v(t)),r.get("createLink")(k)):S(t,e,{recursive:!0})};if(w.exists(E))for(entry in w.list(E,{fullNames:!0}))I(entry,store_path);else I(E,O);t=!0}}return t&&(function(t){return j(k(t,"data.txt"))}(O)||(f.description=s,f.type=l,f=jn(f,b),Ze(O,f,w.list(O,{recursive:!0}))),pn.apply(void 0,[x,O,A,f].concat(g)),p(x)),h?An(A,Object.assign.apply(Object,[{board:x.name}].concat(g))):null}))};var Pn=function(){return r.get("fetch")},In=function(t,e,n,r){if(void 0===n&&(n="GET"),t.url&&(e=e.replace("^"+t.url+"/?","")),"function"==typeof t.headers)return t.headers(t,n,e,r);if(t.headers&&(t.headers.length||"string"==typeof t.headers||t.headers.request)||!t.headers)return t.headers;throw"Unsupported class for board headers: "+typeof t.headers},Fn=function(t,e){if(void 0===e&&(e=!1),!j(t)&&e)return[];var n=b(t).join("\n");return Ne.safeLoad(n)},Tn=function(t){return Ne.safeLoad(t)};var _n=function(t,e){var n=e.name,r=e.component,i=e.extract,a=e.customEtag;void 0===a&&(a="");e.removeQuery,e.config;var o=e.headers,c=(e.canFail,e.cache);void 0===c&&(c=!0);var u=e.contentLength;void 0===u&&(u=0);var s=e.subpath,l=e.details;void 0===l&&(l={});var f=e.download;return void 0===f&&(f=!0),new Promise((function(e,p){var d,h,g,b,y,x,O,E,C,j,P;if(s||(s=n),d=Pn(),h=!c,n=n.replace("^https?://",""),g=ze(r,s),!f)return e(g);(b=m(),w.create(b),y=function(t,e){return De((function(){return qe(t,e)}))}(n,r)||{},x=y.cache,O=!0,E=0,x)?(P=Object.keys(x).map((function(t){return x[t].url})),-1===(E=P.findIndex((function(e){return e===t})))?(x={},E=P.length+1):(x=x[E],O=!1)):(y.cache={},x={},E=1);if((c={}).etag=x.etag||"",c.maxAge=x.maxAge||0,c.changeAge=x.changeAge||(new Date).getTime()-c.maxAge,c.url=t,null,D("Checking 'changeAge' header (time, change age, max age): "+new Date+", "+c.changeAge+", "+c.maxAge),l.somethingChanged=!1,(new Date).getTime()>=c.changeAge+c.maxAge||h){var I,F;return a&&a.length?(D("Using custom 'etag' (old, new): "+x.etag+", "+a),c.etag=a,T.call(this)):d(t,{method:"HEAD",headers:o}).then(function(t){try{return(F=t)&&(c.etag=F.headers.etag||"",c.changeAge=(new Date).getTime(),c.maxAge=function(t){if(!t)return null;var e=new RegExp("max-age").test(t);return 1!==e.length?null:(e=t.replace(/.*max-age=/,""),parseFloat(e.replace(/,.*$/,"")))}(F.headers["cache-control"])||2*c.changeAge,u=F.headers["content-length"],D("Checking 'etag' (old, new):  "+x.etag+", "+c.etag)),T.call(this)}catch(t){return p(t)}}.bind(this),p);function T(){var e,n,r;if(I=c.etag||x.etag!==c.etag,O||I||h)return e=v(t),n=k(b,e),D("Downloading "+t+" to "+n),l.somethingChanged=!0,d(t).then((function(e){return e.ok||D("Failed to download remote file: "+t),e})).then(function(t){try{if((r=t).ok)return r.headers["content-type"],r.text().then(function(t){try{return A(t,n),e.call(this)}catch(t){return p(t)}}.bind(this),p);function e(){return i.call(this)}return e.call(this)}catch(t){return p(t)}}.bind(this),p);function i(){return _.call(this)}return i.call(this)}}function _(){return(C=y.cache)[E]=c,i&&(i=!0),w.list(b,{fullNames:!0}).forEach((function(t){S(t,g,{overwrite:!0,recursive:!0})})),j=g.replace(ze(r,""),""),Ge(n,r,{path:y.path||j,cache:C}),e(g)}return _.call(this)}))},Nn=function(t,e){var n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(e,[]);return new Promise((function(e,r){return _n(t,n).then((function(t){try{return e(t)}catch(t){return r(t)}}),r)}))};function Ln(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}var Dn=function(t){return new Promise((function(e,n){var r,i,a,o,c,u,s,l;return t.url?(r="data.txt",t.indexRandomize&&(r+="?rand="+Math.round(1e8*Math.random())),i=k(t.url,r),Pn()(i,{headers:In(t,"data.txt")}).then((function(e){if(e.ok)return e.text();throw new Error("Failed to retrieve data.txt file from "+t.url+".")})).then((function(r){try{return a=r,o=m(),w.create(o),A(a,o),c=k(N(t),"data.txt"),u=Fn(c,!0),s=(s=Fn(o)).map((function(t){var e=u.filter((function(e){return e.path===t.path}));return 1==e.length&&(t.cache=e[0].cache),t})),u=s,l=Ne.safeDump(u),y(c,l.split("\n")),e()}catch(t){return n(t)}}),n)):n(new Error("Invalid 'url' in '"+t.name+"' board."))}))},Rn=function(t,e,n){var r=Fn(k(N(t),"data.txt"));if(!(r=r.filter((function(t){return t.name===e}))).length&&t.needsIndex)throw new Error("Could not find '"+e+"' pin in '"+t.name+"' board.");var i=null;i=r.length?r[0]:[{path:e}];var a=new RegExp(".*/.*\\.[a-zA-Z]+$").test(i.path)?C(i.path):i.path;return{pathGuess:a=new RegExp("^https?://").test(a)?a:k(t.url,a),indexEntry:i}},Mn=function(t,e,n,r){return new Promise((function(r,i){var a,o,c,u;return a=Rn(t,e),o=a.pathGuess,c=a.indexEntry,u=k(o.slice(0,-6),"data.txt"),Nn(u,{name:e,component:t,canFail:!0,download:n,headers:In(t,u)}).then((function(t){try{return r({pathGuess:o,indexEntry:c,downloadPath:u})}catch(t){return i(t)}}),i)}))},Un=function(t){var e=t.board,n=t.name,r=t.files,i=t.path;return new Promise((function(t,a){return r.forEach((function(t){return new Promise((function(r,a){var o,c,u,s;return o=k(n,t),c=k(e.url,o),u=E(k(i,t)),Pn()(c,{method:"PUT",body:u,headers:In(e,o,"PUT",u)}).then((function(e){try{return(s=e).ok?r():a(new Error("Failed to upload '"+t+"' to '"+c+"'. Error: "+s.statusText))}catch(t){return a(t)}}),a)}))})),t()}))},zn=function(t){var e=t.board,n=t.path,r=t.operation,i=t.name,a=t.metadata;return new Promise((function(t,o){var c,u,s,l,f,p,d,h,g,m;return c="data.txt",u=k(e.url,c),s="data.txt",e.indexRandomize&&(s=c+"?rand="+(10*Math.random()^8)),(l=Pn())(k(e.url,s),{headers:In(e,s)}).then(function(s){try{return p=[],(f=s).ok?f.text().then(function(t){try{return p=Tn(t),v.call(this)}catch(t){return o(t)}}.bind(this),o):"remove"===r?o(new Error("Failed to retrieve latest data.txt file, the pin was partially removed.")):v.call(this);function v(){if(d=p.map((function(t){return t.path===n})),(h=d.length?d.filter((function(t){return t})):p.length+1).length||(h=p.length+1),"create"===r)a.columns=null,p[h]=[],p[h].push({path:n}),i&&p[h].push({name:i}),p[h].push(a);else{if("remove"!==r)return o(new Error("Operation "+r+" is unsupported."));h<=p.length&&(p[h]=null)}return c=k(N(e),"data.txt"),g=E(c),l(u,{method:"PUT",body:g,headers:In(e,"data.txt","PUT",g)}).then(function(n){try{return(m=n).ok?(e.indexUpdated||"create"!==r||e.indexUpdated(e),t()):m.text().then((function(t){try{return o(new Error("Failed to update data.txt file: "+t))}catch(t){return o(t)}}),o)}catch(t){return o(t)}}.bind(this),o)}}catch(t){return o(t)}}.bind(this),o)}))},Gn=function(t,e){return new Promise((function(n,r){var i,a,o,c,u,s,l,f,p,d,h;return o=(i=e).url,c=i.browseUrl,u=i.headers,s=i.bucket,l=i.indexUpdated,f=void 0!==(f=i.indexRandomize)&&f,p=void 0===(p=i.needsIndex)||p,d=void 0===(d=i.cache)?g():d,a=Ln(i,["url","browseUrl","headers","bucket","indexUpdated","indexRandomize","needsIndex","cache"]),h=a,o?(t.url=o.replace(/(\/)?data.txt$/g,""),t.headers=u,t.needsIndex=p,t.browseUrl=c||o,t.indexUpdated=l,t.bucket=s,t.indexRandomize=f,Object.keys(h).forEach((function(e){t[e]=h[e]})),Dn(t).then((function(e){try{return n(t)}catch(t){return r(t)}}),r)):r(new Error("The 'datatxt' board requires a 'url' parameter."))}))},qn=function(t,e,n){return new Promise((function(r,i){var o,c,u,s,l,f,p,d,h,g;return c=(o=n).extract,u=o.version,s=void 0===(s=o.download)||s,Ln(o,["extract","version","download"]),Mn(t,e,s).then(function(n){try{if(f=(l=n).indexEntry,p=l.pathGuess,d=l.downloadPath,h=ze(t,e),g=Ke(h),u)return g.versions.includes(u)||(u=rn(g.versions,u)),d=k(p,k(u,"data.txt")),h=k(h,u),Nn(d,{name:e,component:t,canFail:!0,headers:In(t,d),subpath:k(e,u)}).then(function(t){try{return g=Ke(h),p=k(p,u),o.call(this)}catch(t){return i(t)}}.bind(this),i);function o(){var n;g?(d=f.path,(n=function(t){var e=Ke(t);return a(e.path)?null:pinFetch({path:e.path,class:e.type})}(h))?(d="",d=new Regexp("^https?://").test(n)?n:k(p,n)):(f.path=null,Ze(h,f,f.path))):d=k(t.url,e);return new RegExp("https?://").test(d)||(d=k(t.url,d)),Nn(d,{name:e,component:t,extract:c,download:s,headers:In(t,d)}).then((function(t){try{return r(h=t)}catch(t){return i(t)}}),i)}return o.call(this)}catch(t){return i(t)}}.bind(this),i)}))},$n=function(t,e,n){return new Promise((function(e,r){var i,a;return Dn(t).then(function(o){try{if(i=Fn(k(N(t),"data.txt")),n.extended)return e(i);var c,u,s,l;if(a=i.map((function(t){return{name:t.name||v(t.path),description:t.description||"",type:t.type||"files",metadata:t,stringsAsFactors:!1}})),n.name&&(a=a.filter((function(t){return t.name===agrs.name}))),1===a.length)return c=JSON.parse(a[0].metadata),u=new RegExp("\\.[a-zA-Z]+$").test(c.path)?C(c.path):c.path,s=k(t.url,k(u,"data.txt")),fetch(s,{headers:In(t,s)}).then(function(t){try{var e;if((l=t).ok)return l.text().then(function(t){try{return e=Tn(t),c=Je(c,e),a.metadata=c,n.call(this)}catch(t){return r(t)}}.bind(this),r);function n(){return f.call(this)}return n.call(this)}catch(t){return r(t)}}.bind(this),r);function f(){return e(a)}return f.call(this)}catch(t){return r(t)}}.bind(this),r)}))},Wn=function(t,e,n,r,i){return new Promise((function(i,a){var o;return tn(t,n,e),o=w.list(e,{recursive:!0}),Un({board:t,name:n,files:o,path:e}).then((function(e){try{return zn({board:t,path:n,operation:"create",name:n,metadata:r}).then((function(t){try{return i()}catch(t){return a(t)}}),a)}catch(t){return a(t)}}),a)}))},Bn=function(t,e,n){return new Promise((function(n,r){var i,a;return(i=function(t,e){return new Promise((function(n,r){if(1!==$n(t,t.name,{metadata:!0}).length)return r(new Error("Pin '"+e+"' not found."));var i=results[0].metadata,a=i.path;return i.versions.forEach((function(n){return new Promise((function(r,i){var o,c,u,s,l;return o=Rn(t,e).pathGuess,c=k(k(o,n),"data.txt"),u=k(ze(t,e),n),s=k(e,n),Nn(c,{name:e,component:t,canFail:!0,headers:In(t,c),subpath:s}).then((function(t){try{return l=Ke(u),a=a.concat([k(s,l.path),k(s,"data.txt")]),r()}catch(t){return i(t)}}),i)}))})),n(a)}))}(t,e)).push(k(e,"data.txt")),a=Pn(),i.forEach((function(e){return new Promise((function(n,r){var i,o;return i=k(t.url,e),a(i,{method:"DELETE",headers:In(t,e,"DELETE")}).then(function(i){try{if(!(o=i).ok)return o.text().then(function(n){try{return console.warning("Failed to remove '"+e+"' from '"+t.name+"' board. Error: "+n),a.call(this)}catch(t){return r(t)}}.bind(this),r);function a(){return n()}return a.call(this)}catch(t){return r(t)}}.bind(this),r)}))})),zn({board:t,path:e,operation:"remove",name:e}).then((function(i){try{return unlink(ze(t,e),{recursive:!0}),n()}catch(t){return r(t)}}),r)}))},Yn=function(t,e,n){return new Promise((function(r,i){var a,o;return o=void 0===(o=(a=n).download)||o,Ln(a,["download"]),Mn(t,e,o).then((function(n){try{return r(en(t,e))}catch(t){return i(t)}}),i)}))};var Hn=function(t,e,n,i){var a=(new Date).toUTCString(),o=t.bucket;if(new RegExp("^https?://").test(n)){var c=n.replace("^https?://","");n=c.replace("^[^/]+/",""),o=c.replace("//..*","")}var u=[e,"","application/octet-stream","","x-amz-date:"+a,k("/"+o,n)].join("\n"),s=r.get("crypto"),l=s.HmacSHA1(u,t.secret||"").toString(s.enc.Base64);return{Host:o+"."+t.host,"x-amz-date":a,"Content-Type":"application/octet-stream",Authorization:"AWS "+t.key+":"+l}},Vn=function(t,e){return new Promise((function(n,i){var a,o,c,u,s,l,f,p,d;return o=r.get("env"),c=void 0===(c=(a=e).bucket)?o("AWS_BUCKET"):c,u=void 0===(u=a.key)?o("AWS_ACCESS_KEY_ID"):u,s=void 0===(s=a.secret)?o("AWS_SECRET_ACCESS_KEY"):s,l=a.cache,f=void 0===(f=a.host)?"s3.amazonaws.com":f,p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(a,["bucket","key","secret","cache","host"]),t.bucket=c,c?u?s?(d=Object.assign({},p,{name:t.name,url:"http://"+c+"."+f,cache:l,headers:Hn,needsIndex:!1,key:u,secret:s,bucket:c,connect:!1,browseUrl:"https://s3.console.aws.amazon.com/s3/buckets/"+c+"/",host:f}),Gn(t,d).then((function(e){try{return n(t)}catch(t){return i(t)}}),i)):i(new Error("The 's3' board requires a 'secret' parameter.")):i(new Error("The 's3' board requires a 'key' parameter.")):i(new Error("The 's3' board requires a 'bucket' parameter."))}))},Kn=function(t){return"txt"===t.split(".").pop()?"text/plain":""};var Zn=function(t,e,n,i){var a=(new Date).toUTCString(),o="2015-04-05",c=t.container,u=t.account;if(new RegExp("^https?://").test(n)){var s=n.replace("^https?://",""),l=s.replace("^[^/]+/","");u=s.replace("\\..*",""),n=l.replace("^[^/]+/",""),c=l.replace("/.*","")}var f="",p="";i&&(f=P(i),p=Kn(i));var d=[e,"\n",f,"",p,"\n\n\n\n\n","x-ms-blob-type:BlockBlob","x-ms-date:"+a,"x-ms-version:2015-04-05","/"+u+"/"+c+"/"+n].join("\n"),h=r.get("crypto");return{"x-ms-date":a,"x-ms-version":o,"x-ms-blob-type":"BlockBlob",Authorization:"SharedKey "+u+":"+h.HmacSHA1(d,t.secret||"").toString(h.enc.Base64)}},Jn=function(t,e){return new Promise((function(n,i){var a,o,c,u,s,l,f,p,d;return o=r.get("env"),c=void 0===(c=(a=e).container)?o("AZURE_STORAGE_CONTAINER"):c,u=void 0===(u=a.account)?o("AZURE_STORAGE_ACCOUNT"):u,s=void 0===(s=a.key)?o("AZURE_STORAGE_KEY"):s,l=a.cache,f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(a,["container","account","key","cache"]),c?u?s?(p="https://"+u+".blob.core.windows.net/"+c,d=Object.assign({},f,{name:t.name,url:p,cache:l,headers:Zn,needsIndex:!1,container:c,account:u,key:s,connect:!1,browseUrl:"https://portal.azure.com"}),Gn(t,d).then((function(e){try{return n(yn(t.name))}catch(t){return i(t)}}),i)):i(new Error("The 'azure' board requires a 'key' parameter.")):i(new Error("The 'azure' board requires an 'account' parameter.")):i(new Error("The 'azure' board requires a 'container' parameter."))}))};var Qn=function(){var t=r.get("env")("gcloud.binary.path"),e=r.get("getOption")("gcloud.binary.path"),n=t||(e||"");return n?E(n):(function(t){var e=r.get("env"),n=r.get("which");if("win32"===r.get("platform")()){var i=E(e("localappdata"),{winslash:"/"}),a=k("Google/Cloud SDK/google-cloud-sdk/bin",t+".cmd");return[function(){return k(i,a)},function(){return k(e("ProgramFiles"),a)},function(){return k(e("ProgramFiles(x86)"),a)}]}var o=t;return[function(){return n(o)},function(){return"~/google-cloud-sdk/bin/"+o},function(){return k(e("GCLOUD_INSTALL_PATH")||"~/google-cloud-sdk",k("bin",o))}]}("gcloud").forEach((function(t){if(j(t()))return E(t())})),null)},Xn=function(t){return new Promise((function(e,n){var r,i;return r={cacheControl:"private, max-age=0, no-transform",name:"data.txt"},Pn()("https://storage.googleapis.com/storage/v1/b/"+t.bucket+"./o/"+data.txt,Object.assign({method:"PATCH",body:r},In(t,"o/data.txt","PATCH"))).then((function(t){try{return(i=t).ok||console.warning("Failed to update data.txt metadata: "+i),e()}catch(t){return n(t)}}),n)}))},tr=function(t,e,n,r){var i=null;return r&&(i=Kn(r)),{Authorization:"Bearer "+t.token,"Content-Type":i}},er=function(t,e){return new Promise((function(n,i){var a,o,c,u,s,l,f,p;if(o=r.get("env"),c=void 0===(c=(a=e).bucket)?o("GCLOUD_STORAGE_BUCKET"):c,u=void 0===(u=a.token)?o("GOOGLE_STORAGE_ACCESS_TOKEN"):u,s=a.cache,l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(a,["bucket","token","cache"]),!c)return i(new Error("Board 'gcloud' requires a 'bucket' parameter."));if(is.null(u)&&!u){var d;if(!(d=Qn()))return i(new Error("Board 'gcloud' requires an 'access' parameter with a Google Cloud Access Token."));u=r.get("exec")(d+" 'auth', 'print-access-token'")}return f="https://storage.googleapis.com/"+c,p=Object.assign({},l,{name:t.name,url:f,headers:tr,cache:s,bucket:c,token:u,browse_url:"https://console.cloud.google.com/storage/browser/"+c,indexRandomize:!0,indexUpdated:Xn}),Gn(t,p).then((function(e){try{return n(boardGet(t.name))}catch(t){return i(t)}}),i)}))};var nr=function(t,e,n,i){var a=(new Date).toUTCString(),o=t.space;if(new RegExp("^https?://").test(n)){var c=u.replace("^https?://",""),u=c.replace("^[^/]+/","");o=c.replace("\\..*","")}var s=[e,"","application/octet-stream",a,k(o,n)].join("\n"),l=r.get("btoa")(I(s,t.secret));return{Host:o+"."+t.datacenter+"."+t.host,Date:a,"Content-Type":"application/octet-stream",Authorization:"AWS "+t.key+":"+l}},rr=function(t,e){return new Promise((function(n,i){var a,o,c,u,s,l,f,p,d,h,g;return o=r.get("env"),c=void 0===(c=(a=e).space)?o("DO_SPACE"):c,u=void 0===(u=a.key)?o("DO_ACCESS_KEY_ID"):u,s=void 0===(s=a.secret)?o("DO_SECRET_ACCESS_KEY"):s,l=void 0===(l=a.datacenter)?o("DO_DATACENTER"):l,f=a.cache,p=void 0===(p=a.host)?"digitaloceanspaces.com":p,d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(a,["space","key","secret","datacenter","cache","host"]),c?u?s?l?(t.space=c,h="https://"+t.space+"."+l+"."+p,g=Object.assign({},d,{name:t.name,url:h,cache:f,headers:nr,key:u,secret:s,space:c,datacenter:l,browseUrl:"https://cloud.digitalocean.com/spaces/"+c,host:p}),Gn(t,g).then((function(e){try{return n(boardGet(t.name))}catch(t){return i(t)}}),i)):i(new Error("The 'dospace' board requires a 'datacenter' parameter.")):i(new Error("The 'dospace' board requires a 'secret' parameter.")):i(new Error("The 'dospace' board requires a 'key' parameter.")):i(new Error("The 'dospace' board requires a 'space' parameter."))}))};function ir(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],i=null;i=n.exec(t);){var a=i[1];if(a.length&&a!=e&&r.push([]),i[2])var o=i[2].replace(new RegExp('""',"g"),'"');else o=i[3];r[r.length-1].push(o)}return r}var ar=function(t,e){try{return function(t,e){if(t.length>0){var n=Object.keys(t[0]).join(",");y(e,n)}var r=t.map((function(t){return Object.keys(t).map((function(e){return t[e]})).join(",")}));y(e,r)}(t,e)}catch(t){D("Failed to save data frame as CSV file: "+t)}};return sn("pin","default",(function(t,e){void 0===e&&(e={}),R("pinDefault",{x:t,opts:e});var n=e.description,r=e.board,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(e,["description","board"]),a=e.name||Cn(t,r),o=m();return w.create(o),A(JSON.stringify(t),k(o,"data.json")),Sn(r,Object.assign.apply(Object,[{},{name:a,description:n,path:o,type:"default",metadata:[]}].concat(i)))})),sn("pin","string",(function(t,e){void 0===e&&(e={name:null,description:null,board:null});var n=e.name,r=e.description,i=e.board,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(e,["name","description","board"]),o=u(t),c=o.length>0?"zip":x.fileExt(o);return Sn(i,Object.assign.apply(Object,[{},{name:n,description:r,path:o,type:"files",metadata:{extension:c}}].concat(a)))})),sn("pin","dataframe",(function(t,e){void 0===e&&(e={name:null,description:null,board:null});var n=e.name,r=e.description,i=e.board,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(e,["name","description","board"]);a(n)&&(n=Cn(t,i));var c=m();return w.create(c),A(JSON.stringify(t),k(c,"data.json")),ar(t,k(c,"data.csv")),L((function(){return unlink(c)}),(function(){var e,a=(e=t).hasOwnProperty("columns")?Object.keys(e.columns):e.length>0?Object.keys(e[0]):[];t.length,a.length;return Sn(i,Object.assign.apply(Object,[{},{name:n,description:r,path:c,type:"table",metadata:[]}].concat(o)))}))})),sn("pinPreview","default",(function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return t})),sn("pinLoad","default",(function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return JSON.parse(O(k(t,"data.json")))})),sn("pinFetch","default",(function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.path})),sn("pinLoad","files",(function(t,e){!function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r])}(e,[]);return w.list(t,{recursive:!0,fullNames:!0}).filter((function(t){return!/data\.txt$/g.test(t)}))})),sn("pinLoad","table",(function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=k(t,"data.json"),i=k(t,"data.csv"),a=null;if(j(r))a=JSON.parse(b(r).join("\n\r"));else{if(!j(i))throw new Error("A 'table' pin requires CSV or JSON files.");a=ir(b(i).filter((function(t){return t})).join("\n"))}return a})),sn("boardBrowse","default",(function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return null})),sn("boardPinVersions","default",(function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return F(null,{version:"character"})})),sn("boardInitialize","default",(function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];throw new Error("Board '"+t.name+"' is not a valid board.")})),sn("boardInitialize","local",(function(t,e){an(e,[]);return w.exists(t.cache)||w.create(t.cache,{recursive:!0}),t})),sn("boardPinCreate","local",(function(t,e,n,r){for(var i=[],a=arguments.length-4;a-- >0;)i[a]=arguments[a+4];tn(t,n,e);var o=ze(t,n),c=w.list(o,{fullNames:!0}).filter((function(t){return/(\/|\\)_versions/gi.test(t)}));w.remove(c,{recursive:!0}),w.exists(o)||w.create(o),S(w.list(e,{fullNames:!0}),o,{recursive:!0}),r.columns=null;var u=N(t);return Ge(n,t,Object.assign({path:Ye(o,{basePath:u})},r))})),sn("boardPinFind","local",(function(t,e,n){an(n,[]);var r=function(t,e){var n=We(e);return L((function(){return Be(n)}),(function(){var n=Me(e),r=Le(n);return"string"==typeof t&&t.length>0&&(r=r.filter((function(e){return new RegExp(t,"gi").test(e.name)}))),r}))}(e,t);if(1==r.length){var i=r[0].metadata,a=He(i.path,t),o=Ke(a),c=Je(i,o);r[0].metadata=c}return r})),sn("boardPinGet","local",(function(t,e,n){var r=an(n,[]).version,i=function(t,e){return qe(t,e).path}(e,t);if(!a(r)){var o=Ke(He(i,t));o.versions.includes(r)||(r=rn(o.versions,r)),i=k(e,r)}return He(i,t)})),sn("boardPinRemove","local",(function(t,e){return function(t,e,n){void 0===n&&(n=!0);var r=Me(e);t=$e(t,r);var i=r.filter((function(e){return e.name==t}));if(i.length>0){i=i[0],r=r.filter((function(e){return e.name!=t}));var a=He(i.path,e);return n&&w.remove(a,{recursive:!0}),Ue(r,e)}}(e,t)})),sn("boardPinVersions","local",(function(t,e){return en(t,e)})),sn("boardInitialize","datatxt",Gn),sn("boardPinCreate","datatxt",Wn),sn("boardPinFind","datatxt",$n),sn("boardPinGet","datatxt",qn),sn("boardPinRemove","datatxt",Bn),sn("boardPinVersions","datatxt",Yn),sn("boardInitialize","s3",Vn),sn("boardPinCreate","s3",Wn),sn("boardPinFind","s3",$n),sn("boardPinGet","s3",qn),sn("boardPinRemove","s3",Bn),sn("boardPinVersions","s3",Yn),sn("boardInitialize","azure",Jn),sn("boardInitialize","gcloud",er),sn("boardInitialize","dospaces",rr),t.azureHeaders=Zn,t.boardConnect=mn,t.boardDeregister=function(t,e){if(void 0===e&&(e={}),!h().includes(t))throw"Board '"+t+"' is not registered";yn(t);return e.disconnect&&vn(t),function(t){delete d[t]}(t),null},t.boardDisconnect=vn,t.boardGet=yn,t.boardInitializeAzure=Jn,t.boardInitializeDospaces=rr,t.boardInitializeGCloud=er,t.boardInitializeS3=Vn,t.boardList=bn,t.boardRegister=wn,t.callbacks=r,t.dospacesHeaders=nr,t.gcloudHeaders=tr,t.pin=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return new Promise((function(n,r){return R("pin",Object.assign.apply(Object,[{x:t}].concat(e))),ln.apply(void 0,["pin",t].concat(e)).then((function(t){try{return n(l(t))}catch(t){return r(t)}}),r)}))},t.pinFetch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return fn.apply(void 0,["pinFetch"].concat(t))},t.pinFind=On,t.pinGet=An,t.pinInfo=function(t,e){e.board;var n=e.extended,r=e.metadata,i=e.signature;xn(e,["board","extended","metadata","signature"]);return new Promise((function(e,a){var o,c,u,s;return function(t,e,n,r){return new Promise((function(i,a){var o;return On(null,{name:t,board:e,metadata:!1,extended:!1}).then((function(c){try{return 0==(o=c).length?a(new Error("Pin '"+t+"' was not found.")):o.length>1?a(new Error("Pin '"+t+"' was found in multiple boards: "+o.board.join(",")+".")):(e=o[0].board,On(null,{name:t,board:e,metadata:r,extended:n}).then((function(t){try{return i((o=t)[0])}catch(t){return a(t)}}),a))}catch(t){return a(t)}}),a)}))}(t,c,n,r).then(function(n){try{if(c=(o=n).board,r=[],Object.keys(o).includes("metadata")&&o.metadata.columns.length>0&&(r=o.metadata),i)return An(t,{board:c,files:!0}).then(function(t){try{return u=t,o.signature=pinVersionSignature(u),l.call(this)}catch(t){return a(t)}}.bind(this),a);function l(){for(t in delete(s=Object.assign(o)).metadata,[].concat(Object.keys(s)).forEach((function(t){!(s[t]instanceof Array)||1!=s[t].length||!(s[t][0]instanceof Array)||s[t][0].length>0||delete s[t]})),r)s[t]=r[t];return e(Object.assign(s,{class:"pin_info"}))}return l.call(this)}catch(t){return a(t)}}.bind(this),a)}))},t.pinLoad=kn,t.pinPreview=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return fn.apply(void 0,["pinPreview",t].concat(e))},t.pinRemove=function(t,e){return function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];fn.apply(void 0,["boardPinRemove",t,e].concat(n))}(e=yn(e),t),p(e),null},t.pinVersions=function(t,e){var n=e.board,r=e.full;void 0===r&&(r=!1);xn(e,["board","full"]);var i=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return fn.apply(void 0,["boardPinVersions",t,e].concat(n))}(yn(n),t);return r||(i.version=nn(i.version)),i},t.s3Headers=Hn,t}({});
//# sourceMappingURL=pins.min.js.map
